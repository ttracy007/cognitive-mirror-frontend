{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Projects/cognitive-mirror-frontend-dev/src/components/JournalTimeline.js\",\n  _s = $RefreshSig$();\n// Step 1: Import dependencies at the top of JournalTimeline.js \nimport React, { useEffect, useState, useMemo, useRef, useCallback } from 'react';\nimport { supabase } from '../supabaseClient';\nimport dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/timezone';\nimport timezone from 'dayjs/plugin/timezone';\ndayjs.extend(utc);\ndayjs.extend(timezone);\nimport groupBy from 'lodash/groupBy';\nimport sortBy from 'lodash/sortBy';\nimport uniq from 'lodash/uniq';\nimport Card from './Card';\nimport { Button } from './Button';\nimport ChatBubble from './ChatBubble';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JournalTimeline({\n  userId,\n  refreshTrigger,\n  styleVariant\n}) {\n  _s();\n  var _journalEntries;\n  const [journalEntries, setJournalEntries] = useState([]);\n  // const [topics, setTopics] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [collapsedDays, setCollapsedDays] = useState({});\n  const [allCollapsed, setAllCollapsed] = useState(false);\n  // const [selectedTopic, setSelectedTopic] = useState('all');\n  const [selectedTheme, setSelectedTheme] = useState(null);\n  const [availableThemes, setAvailableThemes] = useState([]);\n  const [collaspedMonths, setCollapsedMonths] = useState({});\n  const bottomRef = useRef(null);\n  const timelineRef = useRef(null);\n\n  // Track zoom/pinch state to prevent scroll interference\n  const [isZooming, setIsZooming] = useState(false);\n  const [touchCount, setTouchCount] = useState(0);\n  const zoomTimeoutRef = useRef(null);\n\n  // ✅ Canonical theme list for dropdown\n  const canonicalThemes = ['Meaning / Existential Anxiety', 'Identity / Role Confusion', 'Purpose / Direction', 'Control / Safety', 'Attachment / Relationships', 'Autonomy / Power', 'Vulnerability / Trust', 'Self-worth / Shame', 'Motivation / Change', 'Grief / Loss'];\n  const [themeOptions, setThemeOptions] = useState([]);\n  useEffect(() => {\n    setThemeOptions(canonicalThemes);\n  }, []);\n\n  // Smart Insight Card \n  const [showSmartInsight, setShowSmartInsight] = useState(true);\n  const [insightTheme, setInsightTheme] = useState('');\n\n  // 🧠 Compute monthly mention count for selected theme\n  const monthlyMentions = insightTheme ? journalEntries.filter(entry => {\n    const isMatch = entry.primary_theme === insightTheme || entry.secondary_theme === insightTheme;\n    const inThisMonth = dayjs(entry.timestamp).isSame(dayjs(), 'month');\n    return isMatch && inThisMonth;\n  }).length : 0;\n  const [themeInsight, setThemeInsight] = useState(null);\n  useEffect(() => {\n    const fetchInsight = async () => {\n      if (!insightTheme || !userId) {\n        setThemeInsight(null);\n        return;\n      }\n      try {\n        const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/mention-count?user_id=${userId}&theme=${encodeURIComponent(insightTheme)}`);\n        const data = await response.json();\n        if (response.ok) {\n          setThemeInsight(data);\n        } else {\n          console.error('❌ Error fetching theme insight:', data.error);\n          setThemeInsight(null);\n        }\n      } catch (err) {\n        console.error('❌ Fetch failed:', err);\n        setThemeInsight(null);\n      }\n    };\n    fetchInsight();\n  }, [insightTheme, userId]);\n  useEffect(() => {\n    const fetchJournals = async () => {\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.from('journals').select('*') // ✅ Include all fields for flexibility\n      .eq('user_id', userId).order('timestamp', {\n        ascending: false\n      });\n      if (error) {\n        console.error('❌ Error fetching journals:', error.message);\n        setLoading(false);\n        return;\n      }\n      setJournalEntries(data || []);\n      console.log('✅ journalEntries populated:', data); // Add this\n      setLoading(false);\n    };\n    fetchJournals();\n  }, [userId, refreshTrigger]);\n\n  // Zoom detection handlers\n  const handleTouchStart = useCallback(e => {\n    setTouchCount(e.touches.length);\n    if (e.touches.length >= 2) {\n      setIsZooming(true);\n      if (zoomTimeoutRef.current) {\n        clearTimeout(zoomTimeoutRef.current);\n      }\n    }\n  }, []);\n  const handleTouchEnd = useCallback(e => {\n    setTouchCount(e.touches.length);\n    if (e.touches.length < 2) {\n      // Delay before re-enabling auto-scroll to prevent conflicts\n      zoomTimeoutRef.current = setTimeout(() => {\n        setIsZooming(false);\n      }, 500);\n    }\n  }, []);\n\n  // Clean up timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (zoomTimeoutRef.current) {\n        clearTimeout(zoomTimeoutRef.current);\n      }\n    };\n  }, []);\n  useEffect(() => {\n    // Disable auto-scroll on mobile to prevent scroll interference\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;\n\n    // Only auto-scroll on desktop or when explicitly safe\n    if (bottomRef.current && !isZooming && touchCount < 2 && !isMobile) {\n      // Debounce scroll to prevent competing scroll behaviors\n      const timeoutId = setTimeout(() => {\n        bottomRef.current.scrollIntoView({\n          behavior: 'auto',\n          block: 'end'\n        });\n      }, 100);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [journalEntries, isZooming, touchCount]);\n\n  // ✅ FILTER THEMES: Step 1: Filter entries by selected theme before grouping\n  const filteredEntries = selectedTheme ? journalEntries.filter(entry => {\n    var _entry$primary_theme, _entry$secondary_them;\n    return ((_entry$primary_theme = entry.primary_theme) === null || _entry$primary_theme === void 0 ? void 0 : _entry$primary_theme.toLowerCase()) === selectedTheme.toLowerCase() || ((_entry$secondary_them = entry.secondary_theme) === null || _entry$secondary_them === void 0 ? void 0 : _entry$secondary_them.toLowerCase()) === selectedTheme.toLowerCase();\n  }) : journalEntries;\n\n  // ✅ Then group filtered entries by month\n  const groupedByMonth = groupBy(filteredEntries, entry => dayjs(entry.timestamp).format('YYYY-MM'));\n\n  //Visual Feedback for Empty Results\n  {\n    filteredEntries.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '1rem',\n        fontStyle: 'italic',\n        color: '#666'\n      },\n      children: \"No journal entries found for this topic.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }, this);\n  }\n  const timeline = Object.entries(groupedByMonth).map(([month, monthEntries]) => {\n    const groupedByDay = groupBy(monthEntries, entry => dayjs(entry.timestamp).format('YYYY-MM-DD'));\n    return {\n      month,\n      days: Object.entries(groupedByDay).map(([day, entries]) => ({\n        day,\n        entries: entries.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp)) // 📈 Old-to-new per day\n      }))\n    };\n  });\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading journal entries...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 12\n    }, this);\n  }\n  if (!journalEntries.length) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"No entries found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 12\n    }, this);\n  }\n  const themeSet = new Set();\n  const latestEntryId = (_journalEntries = journalEntries[journalEntries.length - 1]) === null || _journalEntries === void 0 ? void 0 : _journalEntries.id;\n  journalEntries.forEach(entry => {\n    if (entry.primary_theme) themeSet.add(entry.primary_theme);\n    if (entry.secondary_theme && entry.secondary_theme !== 'NONE') {\n      themeSet.add(entry.secondary_theme);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: timelineRef,\n    onTouchStart: handleTouchStart,\n    onTouchEnd: handleTouchEnd,\n    style: {\n      padding: '1rem',\n      paddingBottom: '14rem',\n      // Extra space for mobile input container\n      overflowY: 'auto',\n      maxHeight: 'calc(100svh - 12rem)',\n      // Adjust depending on header/footer height\n      WebkitOverflowScrolling: 'touch',\n      // Smooth scrolling on iOS\n      // Remove smooth scroll behavior to prevent zoom conflicts\n      scrollBehavior: 'auto',\n      willChange: 'scroll-position',\n      // Optimize for scroll performance\n      touchAction: 'pan-x pan-y pinch-zoom',\n      // Allow pinch-zoom and panning\n      userSelect: 'none' // Prevent text selection during zoom\n    },\n    children: [Object.entries(journalEntries.reduce((acc, entry) => {\n      const dateKey = dayjs(entry.timestamp).format('YYYY-MM-DD');\n      if (!acc[dateKey]) acc[dateKey] = [];\n      acc[dateKey].push(entry);\n      return acc;\n    }, {})).sort((a, b) => new Date(a[0]) - new Date(b[0])) // 🪃 Recent date first\n    .map(([dateKey, entries]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1rem',\n          fontWeight: 'bold',\n          marginBottom: '0.5rem',\n          color: '#444'\n        },\n        children: dayjs(dateKey).format('MMMM D, YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }, this), entries.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp)).map(entry => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '1rem'\n        },\n        children: [entry.entry_text && /*#__PURE__*/_jsxDEV(ChatBubble, {\n          entry: {\n            entry_text: entry.entry_text,\n            tone_mode: 'user',\n            entry_type: 'reflection'\n          },\n          styleVariant: styleVariant,\n          isMostRecent: entry.id === latestEntryId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 19\n        }, this), entry.response_text && /*#__PURE__*/_jsxDEV(ChatBubble, {\n          entry: entry,\n          styleVariant: styleVariant,\n          isMostRecent: entry.id === latestEntryId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: '2.5rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 17\n        }, this)]\n      }, entry.id || entry.timestamp, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 15\n      }, this))]\n    }, dateKey, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: bottomRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 3\n  }, this);\n}\n_s(JournalTimeline, \"kEZcL8BkHJEjeHjhMRFnfDlWLIc=\");\n_c = JournalTimeline;\nvar _c;\n$RefreshReg$(_c, \"JournalTimeline\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useRef","useCallback","supabase","dayjs","utc","timezone","extend","groupBy","sortBy","uniq","Card","Button","ChatBubble","jsxDEV","_jsxDEV","JournalTimeline","userId","refreshTrigger","styleVariant","_s","_journalEntries","journalEntries","setJournalEntries","loading","setLoading","collapsedDays","setCollapsedDays","allCollapsed","setAllCollapsed","selectedTheme","setSelectedTheme","availableThemes","setAvailableThemes","collaspedMonths","setCollapsedMonths","bottomRef","timelineRef","isZooming","setIsZooming","touchCount","setTouchCount","zoomTimeoutRef","canonicalThemes","themeOptions","setThemeOptions","showSmartInsight","setShowSmartInsight","insightTheme","setInsightTheme","monthlyMentions","filter","entry","isMatch","primary_theme","secondary_theme","inThisMonth","timestamp","isSame","length","themeInsight","setThemeInsight","fetchInsight","response","fetch","process","env","REACT_APP_BACKEND_URL","encodeURIComponent","data","json","ok","console","error","err","fetchJournals","from","select","eq","order","ascending","message","log","handleTouchStart","e","touches","current","clearTimeout","handleTouchEnd","setTimeout","isMobile","test","navigator","userAgent","window","innerWidth","timeoutId","scrollIntoView","behavior","block","filteredEntries","_entry$primary_theme","_entry$secondary_them","toLowerCase","groupedByMonth","format","style","marginTop","fontStyle","color","children","fileName","_jsxFileName","lineNumber","columnNumber","timeline","Object","entries","map","month","monthEntries","groupedByDay","days","day","sort","a","b","Date","themeSet","Set","latestEntryId","id","forEach","add","ref","onTouchStart","onTouchEnd","padding","paddingBottom","overflowY","maxHeight","WebkitOverflowScrolling","scrollBehavior","willChange","touchAction","userSelect","reduce","acc","dateKey","push","marginBottom","fontSize","fontWeight","entry_text","tone_mode","entry_type","isMostRecent","response_text","height","_c","$RefreshReg$"],"sources":["/Users/mac/Projects/cognitive-mirror-frontend-dev/src/components/JournalTimeline.js"],"sourcesContent":["// Step 1: Import dependencies at the top of JournalTimeline.js \nimport React, { useEffect, useState, useMemo, useRef, useCallback } from 'react';\nimport { supabase } from '../supabaseClient';\nimport dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/timezone';\nimport timezone from 'dayjs/plugin/timezone';\n \n\n\ndayjs.extend(utc);\ndayjs.extend(timezone);\n\nimport groupBy from 'lodash/groupBy';\nimport sortBy from 'lodash/sortBy';\nimport uniq from 'lodash/uniq';\nimport Card from './Card';\nimport { Button } from './Button';\nimport ChatBubble from './ChatBubble';\n\nexport default function JournalTimeline({userId, refreshTrigger, styleVariant }) {\n  const [journalEntries, setJournalEntries] = useState([]);\n  // const [topics, setTopics] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [collapsedDays, setCollapsedDays] = useState({});\n  const [allCollapsed, setAllCollapsed] = useState(false);\n  // const [selectedTopic, setSelectedTopic] = useState('all');\n  const [selectedTheme, setSelectedTheme] = useState(null);\n  const [availableThemes, setAvailableThemes] = useState([]);\n  const [collaspedMonths, setCollapsedMonths] = useState({});\n  const bottomRef = useRef(null);\n  const timelineRef = useRef(null);\n  \n  // Track zoom/pinch state to prevent scroll interference\n  const [isZooming, setIsZooming] = useState(false);\n  const [touchCount, setTouchCount] = useState(0);\n  const zoomTimeoutRef = useRef(null);\n\n\n\n// ✅ Canonical theme list for dropdown\nconst canonicalThemes = [\n  'Meaning / Existential Anxiety',\n  'Identity / Role Confusion',\n  'Purpose / Direction',\n  'Control / Safety',\n  'Attachment / Relationships',\n  'Autonomy / Power',\n  'Vulnerability / Trust',\n  'Self-worth / Shame',\n  'Motivation / Change',\n  'Grief / Loss'\n];\n\nconst [themeOptions, setThemeOptions] = useState([]);\nuseEffect(() => {\nsetThemeOptions(canonicalThemes);\n}, []);\n\n// Smart Insight Card \nconst [showSmartInsight, setShowSmartInsight] = useState(true);\nconst [insightTheme, setInsightTheme] = useState('');\n\n// 🧠 Compute monthly mention count for selected theme\nconst monthlyMentions = insightTheme\n  ? journalEntries.filter(entry => {\n      const isMatch =\n        entry.primary_theme === insightTheme ||\n        entry.secondary_theme === insightTheme;\n      const inThisMonth =\n        dayjs(entry.timestamp).isSame(dayjs(), 'month');\n      return isMatch && inThisMonth;\n    }).length\n  : 0;\n\nconst [themeInsight, setThemeInsight] = useState(null);\n\nuseEffect(() => {\n  const fetchInsight = async () => {\n    if (!insightTheme || !userId) {\n      setThemeInsight(null);\n      return;\n    }\n\n    try {\n      const response = await fetch(\n        `${process.env.REACT_APP_BACKEND_URL}/mention-count?user_id=${userId}&theme=${encodeURIComponent(insightTheme)}`\n      );\n      const data = await response.json();\n      if (response.ok) {\n        setThemeInsight(data);\n      } else {\n        console.error('❌ Error fetching theme insight:', data.error);\n        setThemeInsight(null);\n      }\n    } catch (err) {\n      console.error('❌ Fetch failed:', err);\n      setThemeInsight(null);\n    }\n  };\n\n  fetchInsight();\n}, [insightTheme, userId]);\n  \nuseEffect(() => {\n  const fetchJournals = async () => {\n    setLoading(true);\n\n    const { data, error } = await supabase\n      .from('journals')\n      .select('*')  // ✅ Include all fields for flexibility\n      .eq('user_id', userId)\n      .order('timestamp', { ascending: false });\n\n    if (error) {\n      console.error('❌ Error fetching journals:', error.message);\n      setLoading(false);\n      return;\n    }\n\n    setJournalEntries(data || []);\n    console.log('✅ journalEntries populated:', data); // Add this\n    setLoading(false);\n  };\n\n  fetchJournals();\n}, [userId, refreshTrigger]);\n\n  // Zoom detection handlers\n  const handleTouchStart = useCallback((e) => {\n    setTouchCount(e.touches.length);\n    if (e.touches.length >= 2) {\n      setIsZooming(true);\n      if (zoomTimeoutRef.current) {\n        clearTimeout(zoomTimeoutRef.current);\n      }\n    }\n  }, []);\n\n  const handleTouchEnd = useCallback((e) => {\n    setTouchCount(e.touches.length);\n    if (e.touches.length < 2) {\n      // Delay before re-enabling auto-scroll to prevent conflicts\n      zoomTimeoutRef.current = setTimeout(() => {\n        setIsZooming(false);\n      }, 500);\n    }\n  }, []);\n\n  // Clean up timeout on unmount\n  useEffect(() => {\n    return () => {\n      if (zoomTimeoutRef.current) {\n        clearTimeout(zoomTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    // Disable auto-scroll on mobile to prevent scroll interference\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;\n    \n    // Only auto-scroll on desktop or when explicitly safe\n    if (bottomRef.current && !isZooming && touchCount < 2 && !isMobile) {\n      // Debounce scroll to prevent competing scroll behaviors\n      const timeoutId = setTimeout(() => {\n        bottomRef.current.scrollIntoView({ \n          behavior: 'auto',\n          block: 'end'\n        });\n      }, 100);\n      \n      return () => clearTimeout(timeoutId);\n    }\n  }, [journalEntries, isZooming, touchCount]);\n\n // ✅ FILTER THEMES: Step 1: Filter entries by selected theme before grouping\nconst filteredEntries = selectedTheme\n  ? journalEntries.filter(entry =>\n      entry.primary_theme?.toLowerCase() === selectedTheme.toLowerCase() || \n      entry.secondary_theme?.toLowerCase() === selectedTheme.toLowerCase()\n    )\n  : journalEntries;\n\n   // ✅ Then group filtered entries by month\n  const groupedByMonth = groupBy(filteredEntries, entry =>\n    dayjs(entry.timestamp).format('YYYY-MM')\n  );\n\n  //Visual Feedback for Empty Results\n  {filteredEntries.length === 0 && (\n    <p style={{ marginTop:'1rem', fontStyle: 'italic', color: '#666' }}>\n      No journal entries found for this topic. \n        </p>\n    )}\n  \n  const timeline = Object.entries(groupedByMonth).map(([month, monthEntries]) => {\n    const groupedByDay = groupBy(monthEntries, entry =>\n      dayjs(entry.timestamp).format('YYYY-MM-DD')\n    );\n    \n    return {\n      month,\n      days: Object.entries(groupedByDay).map(([day, entries]) => ({\n        day,\n        entries: entries.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp)) // 📈 Old-to-new per day\n      }))\n    };\n  });\n\n  if (loading) {\n    return <div>Loading journal entries...</div>;\n  }\n\n  if (!journalEntries.length) {\n    return <div>No entries found.</div>;\n  }\n\n  const themeSet = new Set();\n  const latestEntryId = journalEntries[journalEntries.length - 1]?.id;\n\njournalEntries.forEach(entry => {\n  if (entry.primary_theme) themeSet.add(entry.primary_theme);\n  if (entry.secondary_theme && entry.secondary_theme !== 'NONE') {\n    themeSet.add(entry.secondary_theme);\n  }\n});\n\nreturn (\n  <div\n    ref={timelineRef}\n    onTouchStart={handleTouchStart}\n    onTouchEnd={handleTouchEnd}\n    style={{\n      padding: '1rem',\n      paddingBottom: '14rem', // Extra space for mobile input container\n      overflowY: 'auto',\n      maxHeight: 'calc(100svh - 12rem)', // Adjust depending on header/footer height\n      WebkitOverflowScrolling: 'touch', // Smooth scrolling on iOS\n      // Remove smooth scroll behavior to prevent zoom conflicts\n      scrollBehavior: 'auto',\n      willChange: 'scroll-position', // Optimize for scroll performance\n      touchAction: 'pan-x pan-y pinch-zoom', // Allow pinch-zoom and panning\n      userSelect: 'none' // Prevent text selection during zoom\n    }}\n>\n    {Object.entries(\n      journalEntries.reduce((acc, entry) => {\n        const dateKey = dayjs(entry.timestamp).format('YYYY-MM-DD');\n        if (!acc[dateKey]) acc[dateKey] = [];\n        acc[dateKey].push(entry);\n        return acc;\n      }, {})\n    )\n      .sort((a, b) => new Date(a[0]) - new Date(b[0])) // 🪃 Recent date first\n      .map(([dateKey, entries]) => (\n        <div key={dateKey} style={{ marginBottom: '2rem' }}>\n          <h3 style={{\n            fontSize: '1rem',\n            fontWeight: 'bold',\n            marginBottom: '0.5rem',\n            color: '#444'\n          }}>\n            {dayjs(dateKey).format('MMMM D, YYYY')}\n          </h3>\n          {entries\n            .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp))\n            .map(entry => (\n              <div key={entry.id || entry.timestamp} style={{ marginBottom: '1rem' }}>\n                {entry.entry_text && (\n                  <ChatBubble\n                    entry={{\n                      entry_text: entry.entry_text,\n                      tone_mode: 'user',\n                      entry_type: 'reflection'\n                    }}\n                    styleVariant={styleVariant}\n                    isMostRecent={entry.id === latestEntryId}\n                  />\n                )}\n          \n                {entry.response_text && (\n                  <ChatBubble\n                    entry={entry}\n                    styleVariant={styleVariant}\n                    isMostRecent={entry.id === latestEntryId}\n                  />\n                )}\n                <div style={{ height: '2.5rem' }} />\n              </div>\n          ))}\n        </div>\n      ))}\n      <div ref={bottomRef} />\n  </div>\n);\n\n}\n\n  \n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}