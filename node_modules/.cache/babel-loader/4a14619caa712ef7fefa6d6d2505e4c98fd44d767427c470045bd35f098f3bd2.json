{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Projects/cognitive-mirror-frontend-dev/src/components/ChatBubble.js\";\n// ChatBubble.js    \nimport dayjs from 'dayjs';\nimport FeedbackBar from './FeedbackBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ChatBubble({\n  entry,\n  isMostRecent = false,\n  styleVariant = \"A\"\n}) {\n  const isUser = entry.tone_mode === 'user';\n  const userId = entry.user_id;\n  const showFeedback = !isUser && !!entry.response_text;\n  const isInsight = entry.entry_type === 'insight';\n  const style = getToneStyle(entry.tone_mode || 'frank');\n  const isUserEntry = !entry.response_text && !isInsight;\n  if (isMostRecent) {\n    console.log('Tone Mode:', entry.tone_mode);\n    console.log('Resolved Style:', getToneStyle(entry.tone_mode || 'frank'));\n  }\n  const bubbleStyle = (() => {\n    switch (styleVariant) {\n      case \"B\":\n        return {\n          base: {\n            backgroundColor: '#fefefe',\n            border: '1px solid #ddd',\n            padding: '1rem',\n            borderRadius: '12px',\n            marginBottom: '0.75rem',\n            maxWidth: '80%',\n            fontSize: '0.95rem'\n          },\n          alignment: {\n            alignSelf: isUser ? 'flex-start' : 'flex-end'\n          }\n        };\n      case \"C\":\n        return {\n          base: {\n            backgroundColor: 'transparent',\n            padding: '0.5rem 0',\n            marginBottom: '0.5rem',\n            maxWidth: '85%',\n            fontSize: '1rem'\n          },\n          alignment: {\n            alignSelf: isUser ? 'flex-start' : 'flex-end'\n          }\n        };\n      case \"D\":\n        return {\n          base: {\n            backgroundColor: isInsight ? '#f4f0ff' : style.backgroundColor,\n            borderLeft: `5px solid ${style.borderColor}`,\n            padding: '0.9rem 1rem',\n            borderRadius: '12px',\n            marginBottom: '0.75rem',\n            maxWidth: '75%',\n            fontSize: '0.95rem'\n          },\n          alignment: {\n            alignSelf: isUser ? 'flex-start' : 'flex-end'\n          }\n        };\n      case \"A\":\n      default:\n        return {\n          base: {\n            backgroundColor: isInsight ? '#f4f0ff' : '#e0f7fa',\n            padding: '0.8rem 1rem',\n            borderRadius: isUser ? '16px 16px 0 16px' : '16px 16px 16px 0',\n            marginBottom: '0.75rem',\n            maxWidth: '75%'\n          },\n          alignment: {\n            alignSelf: isUser ? 'flex-start' : 'flex-end'\n          }\n        };\n    }\n  })();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: isUser ? 'flex-end' : 'flex-start',\n      marginBottom: '1.2rem'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: isUser ? '#f0f0f0' : style.backgroundColor,\n        borderLeft: isInsight ? '4px solid #5c6ac4' : `4px solid ${style.borderColor}`,\n        padding: '0.8rem 1rem',\n        borderRadius: isUser ? '16px 16px 16px 0' : '16px 16px 0 16px',\n        maxWidth: '75%',\n        textAlign: 'left',\n        fontWeight: isInsight ? '600' : 'normal',\n        boxShadow: '0 1px 2px rgba(0,0,0,0.08)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '0.8rem',\n          fontWeight: 'bold',\n          marginBottom: '0.4rem',\n          color: isUser ? '#444' : style.borderColor\n        },\n        children: [isUser ? 'You' : style.label, isInsight ? ' â€¢ Insight' : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }, this), isUser && entry.entry_text && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginBottom: '0.5rem'\n        },\n        children: entry.entry_text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), entry.response_text && entry.response_text.split('\\n').map((para, idx) => /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          marginBottom: '0.5rem'\n        },\n        children: para\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '0.75rem',\n          color: '#999',\n          marginTop: '0.4rem',\n          textAlign: isUser ? 'left' : 'right'\n        },\n        children: dayjs(entry.timestamp).format('h:mm A')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }, this), showFeedback && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '6px'\n        },\n        children: /*#__PURE__*/_jsxDEV(FeedbackBar, {\n          journalId: entry.id,\n          userId: userId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 3\n  }, this);\n}\n_c = ChatBubble;\nfunction getToneStyle(tone) {\n  switch (tone.toLowerCase()) {\n    case 'frank':\n      return {\n        backgroundColor: '#fff3e0',\n        borderColor: '#fb8c00',\n        label: 'Tony'\n      };\n    case 'marcus':\n      return {\n        backgroundColor: '#e8f5e9',\n        borderColor: '#388e3c',\n        label: 'Marcus'\n      };\n    case 'therapist':\n      return {\n        backgroundColor: '#e0f7f6',\n        borderColor: '#673ab7',\n        label: 'Clara'\n      };\n    case 'movies':\n      return {\n        backgroundColor: '#fce4ec',\n        borderColor: '#c2185b',\n        label: 'Movie Metaphorâ„¢'\n      };\n    case 'verena':\n      return {\n        backgroundColor: '#ffeaf0',\n        borderColor: '#ec407a',\n        label: 'ðŸŒ¸ Verena'\n      };\n    default:\n      return {\n        backgroundColor: '#f0f0f0',\n        borderColor: '#ccc',\n        label: 'Mirror'\n      };\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"ChatBubble\");","map":{"version":3,"names":["dayjs","FeedbackBar","jsxDEV","_jsxDEV","ChatBubble","entry","isMostRecent","styleVariant","isUser","tone_mode","userId","user_id","showFeedback","response_text","isInsight","entry_type","style","getToneStyle","isUserEntry","console","log","bubbleStyle","base","backgroundColor","border","padding","borderRadius","marginBottom","maxWidth","fontSize","alignment","alignSelf","borderLeft","borderColor","display","justifyContent","children","textAlign","fontWeight","boxShadow","color","label","fileName","_jsxFileName","lineNumber","columnNumber","entry_text","split","map","para","idx","marginTop","timestamp","format","journalId","id","_c","tone","toLowerCase","$RefreshReg$"],"sources":["/Users/mac/Projects/cognitive-mirror-frontend-dev/src/components/ChatBubble.js"],"sourcesContent":["// ChatBubble.js    \nimport dayjs from 'dayjs';\nimport FeedbackBar from './FeedbackBar';\n\nexport default function ChatBubble({ entry, isMostRecent = false, styleVariant = \"A\" }) {\n  const isUser = entry.tone_mode === 'user'\n  const userId = entry.user_id; \n  const showFeedback = !isUser && !!entry.response_text;\n  const isInsight = entry.entry_type === 'insight';\n  const style = getToneStyle(entry.tone_mode || 'frank');\n  const isUserEntry = !entry.response_text && !isInsight;\n\n  if (isMostRecent) {\n    console.log('Tone Mode:', entry.tone_mode);\n    console.log('Resolved Style:', getToneStyle(entry.tone_mode || 'frank'));\n  }\n\nconst bubbleStyle = (() => {\n  switch (styleVariant) {\n    case \"B\":\n      return {\n        base: {\n          backgroundColor: '#fefefe',\n          border: '1px solid #ddd',\n          padding: '1rem',\n          borderRadius: '12px',\n          marginBottom: '0.75rem',\n          maxWidth: '80%',\n          fontSize: '0.95rem',\n        },\n        alignment: { alignSelf: isUser ? 'flex-start' : 'flex-end' }\n      };\n    case \"C\":\n      return {\n        base: {\n          backgroundColor: 'transparent',\n          padding: '0.5rem 0',\n          marginBottom: '0.5rem',\n          maxWidth: '85%',\n          fontSize: '1rem',\n        },\n        alignment: { alignSelf: isUser ? 'flex-start' : 'flex-end' }\n      };\n    case \"D\":\n      return {\n        base: {\n          backgroundColor: isInsight ? '#f4f0ff' : style.backgroundColor,\n          borderLeft: `5px solid ${style.borderColor}`,\n          padding: '0.9rem 1rem',\n          borderRadius: '12px',\n          marginBottom: '0.75rem',\n          maxWidth: '75%',\n          fontSize: '0.95rem',\n        },\n        alignment: { alignSelf: isUser ? 'flex-start' : 'flex-end' }\n      };\n    case \"A\":\n    default:\n      return {\n        base: {\n          backgroundColor: isInsight ? '#f4f0ff' : '#e0f7fa',\n          padding: '0.8rem 1rem',\n          borderRadius: isUser ? '16px 16px 0 16px' : '16px 16px 16px 0',\n          marginBottom: '0.75rem',\n          maxWidth: '75%',\n        },\n        alignment: { alignSelf: isUser ? 'flex-start' : 'flex-end' }\n      };\n  }\n})();\n\nreturn (\n  <div style={{ \n    display: 'flex',\n    justifyContent: isUser ? 'flex-end' : 'flex-start',\n    marginBottom: '1.2rem'\n  }}>\n    <div style={{\n      backgroundColor: isUser ? '#f0f0f0' : style.backgroundColor,\n      borderLeft: isInsight ? '4px solid #5c6ac4' : `4px solid ${style.borderColor}`,\n      padding: '0.8rem 1rem',\n      borderRadius: isUser ? '16px 16px 16px 0' : '16px 16px 0 16px',\n      maxWidth: '75%',\n      textAlign: 'left',\n      fontWeight: isInsight ? '600' : 'normal',\n      boxShadow: '0 1px 2px rgba(0,0,0,0.08)'\n    }}>\n      <div style={{\n        fontSize: '0.8rem',\n        fontWeight: 'bold',\n        marginBottom: '0.4rem',\n        color: isUser ? '#444' : style.borderColor\n      }}>\n        {isUser ? 'You' : style.label}{isInsight ? ' â€¢ Insight' : ''}\n      </div>\n\n      {isUser && entry.entry_text && (\n        <p style={{ marginBottom: '0.5rem' }}>{entry.entry_text}</p>\n        )}\n      {entry.response_text && (\n        entry.response_text.split('\\n').map((para, idx) => (\n          <p key={idx} style={{ marginBottom: '0.5rem' }}>{para}</p>\n        ))\n      )}\n\n      {/* Timestamp */}\n      <div style={{\n        fontSize: '0.75rem',\n        color: '#999',\n        marginTop: '0.4rem',\n        textAlign: isUser ? 'left' : 'right'\n      }}>\n        {dayjs(entry.timestamp).format('h:mm A')}\n      </div>\n\n        {/* FeedbackBar */}\n        {showFeedback && (\n        <div style={{ marginTop: '6px' }}>\n          <FeedbackBar journalId={entry.id} userId={userId} />\n        </div>\n      )}\n\n    </div>\n  </div>\n);\n}\n\nfunction getToneStyle(tone) {\n  switch (tone.toLowerCase()) {\n    case 'frank':\n      return { backgroundColor: '#fff3e0', borderColor: '#fb8c00', label: 'Tony' };\n    case 'marcus':\n      return { backgroundColor: '#e8f5e9', borderColor: '#388e3c', label: 'Marcus' };\n    case 'therapist':\n      return { backgroundColor: '#e0f7f6', borderColor: '#673ab7', label: 'Clara' };\n    case 'movies':\n      return { backgroundColor: '#fce4ec', borderColor: '#c2185b', label: 'Movie Metaphorâ„¢' };\n    case 'verena':\n      return { backgroundColor: '#ffeaf0', borderColor: '#ec407a', label: 'ðŸŒ¸ Verena' };\n    default:\n      return { backgroundColor: '#f0f0f0', borderColor: '#ccc', label: 'Mirror' };\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}