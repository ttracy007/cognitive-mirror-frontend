{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Projects/cognitive-mirror-frontend-dev/src/App.js\",\n  _s4 = $RefreshSig$();\n// üîº Imports and Setup      \nimport React, { useEffect, useState } from 'react';\nimport SummaryViewer from './SummaryViewer';\nimport { supabase, UsernameStore, getBootSession, subscribeAuth } from './supabaseClient';\nimport './App.css';\n// import DemoSofia from './pages/DemoSofia';\nimport LandingPage from './LandingPage';\nimport LoginPage from './LoginPage';\nimport JournalTimeline from './components/JournalTimeline';\nimport MoodModal from './components/MoodModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s4();\n  var _session$user, _session$user2, _session$user3, _session$user4;\n  // --- Tone descriptions map ---\n  const toneDescriptions = {\n    therapist: \"ü©∫ Clara ‚Äì A warm, grounded therapist who sees the pattern beneath the panic.\",\n    marcus: \"üßò Marcus ‚Äì Speaks like the Stoic philosopher himself. Will quote Meditations.\",\n    frank: \"üí™üç∑ Tony ‚Äì A frank, no-bullshit friend who tells you what you need to hear.\",\n    movies: \"üé¨ Movies ‚Äì A movie buff who only speaks through movie metaphors.\",\n    verena: \"üå∏ Verena ‚Äì A clarity-driven life coach unphased by self-pity.\"\n  };\n\n  // Default to Clara\n  const [forcedTone, setForcedTone] = useState(\"therapist\");\n  // Keep a visible description bound to the current selection\n  const [toneDescription, setToneDescription] = useState(toneDescriptions[\"therapist\"]);\n  const handleToneChange = e => {\n    const val = e.target.value;\n    setForcedTone(val);\n    setToneDescription(toneDescriptions[val] || \"\");\n  };\n  const toneName = t => ({\n    therapist: 'Clara',\n    marcus: 'Marcus',\n    frank: 'Tony',\n    movies: 'Movies',\n    verena: 'Verena'\n  })[t] || 'Mirror';\n\n  // üîΩ Existing states (no change to their order beyond moving forcedTone here)\n  const [showLogin, setShowLogin] = useState(false);\n  const [session, setSession] = useState(null);\n  const [entry, setEntry] = useState('');\n  const [history, setHistory] = useState([]);\n  const [tooltip, setTooltip] = useState(\"ü©∫ Clara ‚Äì A warm, grounded therapist who sees the pattern beneath the panic.\");\n  const [latestEntryId, setLatestEntryId] = useState(null);\n  const [showSummary, setShowSummary] = useState(false);\n  const [loadingSummary, setLoadingSummary] = useState(false);\n  const [summary, setSummary] = useState('');\n  const [parsedTags, setParsedTags] = useState([]);\n  const [severityLevel, setSeverityLevel] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [recognition, setRecognition] = useState(null);\n  const [inputExpanded, setInputExpanded] = useState(false);\n  const [debugInfo, setDebugInfo] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const prompts = [\"What‚Äôs shaking sugar?\"];\n  const [showGroupedView, setShowGroupedView] = useState(false);\n  const [placeholderPrompt, setPlaceholderPrompt] = useState(() => prompts[Math.floor(Math.random() * prompts.length)]);\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  let transcriptBuffer = '';\n  const [tooltipVisible, setTooltipVisible] = useState(null); // 'pattern' | 'therapist' | 'mood' | null\n  const [styleVariant, setStyleVariant] = useState(\"D\");\n  const [showWelcome, setShowWelcome] = useState(false);\n  const [welcomeStep, setWelcomeStep] = useState(1);\n  const [username, setUsername] = useState('');\n  const [showMoodTracker, setShowMoodTracker] = useState(false);\n  const handleCloseMoodTracker = () => setShowMoodTracker(false);\n  const handleOpenMoodTracker = () => setShowMoodTracker(true);\n\n  // üîΩ Function 1: Load Saved Username (rehydrate)\n  useEffect(() => {\n    const saved = UsernameStore.get();\n    if (saved) setUsername(saved);\n  }, []);\n\n  // Log environment on startup\n  useEffect(() => {\n    console.log(`üöÄ Running in ${process.env.REACT_APP_ENV || 'unknown'} mode`);\n    console.log(`üõ∞Ô∏è Backend: ${process.env.REACT_APP_BACKEND_URL || 'unset'}`);\n    console.log(`üóÑÔ∏è Supabase: ${process.env.REACT_APP_SUPABASE_URL || 'unset'}`);\n  }, []);\n\n  // üîΩ Function 3: Show Summary Trigger\n  useEffect(() => {\n    const hasTriggeredSummary = localStorage.getItem('hasTriggeredSummary');\n    if (!hasTriggeredSummary && history.length >= 5) {\n      setShowSummary(true);\n      localStorage.setItem('hasTriggeredSummary', 'true');\n    }\n  }, [history]);\n\n  // üîΩ Function 3a: Build Current Commit Tag \n  useEffect(() => {\n    fetch('/build-version.txt').then(res => res.text()).then(text => {\n      console.log(\"üõ†Ô∏è App.js version:\", text);\n      // console.log(`üß± Frontend build version: ${text}`);\n    });\n  }, []);\n\n  // üîΩ Function 4: Auth Setup (boot + subscribe once)\n  useEffect(() => {\n    let stop = () => {};\n    (async () => {\n      setSession(await getBootSession());\n      stop = subscribeAuth(setSession);\n    })();\n    return () => stop();\n  }, []);\n\n  // üîΩ Function 5: Submit New Journal Entry (username/session‚Äìsafe)\n  const handleSubmit = async () => {\n    var _s, _s2, _s2$user, _s3;\n    console.warn(\"üß™ handleSubmit called from device width:\", window.innerWidth);\n    console.log(\"üìù Entry content:\", entry.trim());\n\n    // Always read a stable username\n    const u = (username || UsernameStore.get() || '').trim();\n\n    // Make sure we have a session\n    let s = session;\n    if (!s) {\n      s = await getBootSession();\n      if (s) setSession(s);\n    }\n\n    // Guard rails: must have session + entry + username\n    const guardRails = {\n      hasSession: !!((_s = s) !== null && _s !== void 0 && _s.user),\n      hasEntry: !!entry.trim(),\n      hasUsername: !!u,\n      sessionUser: (_s2 = s) === null || _s2 === void 0 ? void 0 : (_s2$user = _s2.user) === null || _s2$user === void 0 ? void 0 : _s2$user.id,\n      username: u,\n      entry: entry.trim()\n    };\n    setDebugInfo(`üîç Guard Rails: ${JSON.stringify(guardRails, null, 2)}`);\n    if (!((_s3 = s) !== null && _s3 !== void 0 && _s3.user) || !entry.trim() || !u) {\n      setDebugInfo('‚ùå Guard rails failed - missing required data');\n      return;\n    }\n    setDebugInfo('üöÄ Starting submission...');\n    setProcessingMessage(`‚è≥ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n    const debug_marker = Math.random().toString(36).substring(2, 8);\n    const userId = s.user.id;\n    const backendUrl = process.env.REACT_APP_BACKEND_URL;\n    const apiDetails = {\n      backendUrl,\n      userId,\n      debug_marker,\n      entryLength: entry.length\n    };\n    setDebugInfo(`üì° API: ${JSON.stringify(apiDetails, null, 2)}`);\n    try {\n      var _navigator$connection;\n      // First, let's test if we can reach the backend URL at all\n      if (!backendUrl) {\n        setDebugInfo('‚ùå Backend URL is undefined!');\n        return;\n      }\n      setDebugInfo(`üì§ Testing connection to: ${backendUrl}\\nüåê User Agent: ${navigator.userAgent}\\nüì° Network: ${((_navigator$connection = navigator.connection) === null || _navigator$connection === void 0 ? void 0 : _navigator$connection.effectiveType) || 'unknown'}`);\n\n      // Test basic connectivity first\n      try {\n        const testResponse = await fetch(`${backendUrl}/health`, {\n          method: 'GET',\n          timeout: 10000 // 10 second timeout\n        });\n        setDebugInfo(`‚úÖ Health check: ${testResponse.status}`);\n      } catch (healthErr) {\n        setDebugInfo(`‚ùå Health check failed: ${healthErr.message}\\nüîÑ Server might be sleeping - trying to wake it up...`);\n\n        // Try to wake up the server by hitting the main endpoint\n        try {\n          await fetch(`${backendUrl}/`, {\n            method: 'GET'\n          });\n          setDebugInfo(`üîÑ Wake-up call sent. Waiting 5 seconds for server to start...`);\n          await new Promise(resolve => setTimeout(resolve, 5000));\n        } catch (wakeErr) {\n          setDebugInfo(`‚ùå Cannot wake server: ${wakeErr.message}`);\n        }\n      }\n      setDebugInfo('üì§ Making journal-entry request...');\n      const requestBody = {\n        entry_text: entry,\n        tone_mode: forcedTone,\n        username: u,\n        user_id: userId,\n        debug_marker\n      };\n      setDebugInfo(`üì¶ Request body: ${JSON.stringify(requestBody, null, 2)}`);\n      const res = await fetch(`${backendUrl}/journal-entry`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'User-Agent': navigator.userAgent,\n          'Origin': window.location.origin\n        },\n        mode: 'cors',\n        credentials: 'omit',\n        body: JSON.stringify(requestBody)\n      });\n      const responseInfo = {\n        status: res.status,\n        statusText: res.statusText,\n        ok: res.ok,\n        headers: Object.fromEntries(res.headers.entries())\n      };\n      setDebugInfo(`üì• Response: ${JSON.stringify(responseInfo, null, 2)}`);\n      if (!res.ok) {\n        const errorText = await res.text();\n        setDebugInfo(`‚ùå Error Response: ${res.status} ${res.statusText}\\nBody: ${errorText}`);\n        return;\n      }\n      const data = await res.json();\n      setDebugInfo(`‚úÖ Success: ${JSON.stringify(data, null, 2)}`);\n      const responseText = data.response || 'No response received.';\n    } catch (err) {\n      var _err$constructor;\n      const errorDetails = {\n        message: err.message || 'Unknown error',\n        name: err.name || 'Unknown',\n        stack: err.stack || 'No stack trace',\n        toString: err.toString(),\n        constructor: ((_err$constructor = err.constructor) === null || _err$constructor === void 0 ? void 0 : _err$constructor.name) || 'Unknown constructor'\n      };\n      setDebugInfo(`‚ùå Detailed Error: ${JSON.stringify(errorDetails, null, 2)}`);\n\n      // Additional specific error checks\n      if (err.name === 'TypeError' && err.message.includes('fetch')) {\n        setDebugInfo(`‚ùå Network Error: Cannot connect to ${backendUrl}\\nThis might be a CORS or connectivity issue.`);\n      }\n    } finally {\n      setEntry('');\n      setParsedTags([]);\n      setSeverityLevel('');\n      setIsProcessing(false);\n      setTimeout(fetchHistory, 300);\n      setRefreshTrigger(prev => prev + 1);\n      // Collapse input on mobile after successful submission\n      if (window.innerWidth <= 768) {\n        setInputExpanded(false);\n      }\n    }\n  };\n\n  // üîΩ Function 5b: Generate Pattern Insight\n  const [processingMessage, setProcessingMessage] = useState(\"\");\n  const handlePatternInsight = async () => {\n    setProcessingMessage(`‚è≥ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n    try {\n      var _userData$user;\n      const {\n        data: userData\n      } = await supabase.auth.getUser();\n      const userId = (_userData$user = userData.user) === null || _userData$user === void 0 ? void 0 : _userData$user.id;\n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/generate-pattern-insight`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          tone_mode: forcedTone // ‚úÖ pass selected voice\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('‚úÖ Insight:', data.insight);\n        setRefreshTrigger(prev => prev + 1); // üîÅ trigger timeline refresh\n      } else {\n        console.error('‚ùå Insight error:', data.error);\n      }\n    } catch (err) {\n      console.error('‚ùå Insight fetch failed:', err);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // üîΩ Function 6: Fetch Past Journals\n  const fetchHistory = async () => {\n    const user = session === null || session === void 0 ? void 0 : session.user;\n    if (!user) return;\n    const {\n      data,\n      error\n    } = await supabase.from('journals').select('id, entry_text, response_text, primary_theme, secondary_theme, tone_mode, timestamp, debug_marker').eq('user_id', user.id).order('timestamp', {\n      ascending: false\n    });\n    if (error) {\n      console.error(\"‚ùå Error fetching history:\", error.message);\n      return;\n    }\n\n    // üîΩ Function 6a: Filter Out No Respose, No debug markers \n\n    const showAll = true; // <== True all entries, False filtered \n    const filtered = showAll ? data || [] : (data || []).filter(entry => {\n      var _entry$response_text, _entry$debug_marker;\n      return ((_entry$response_text = entry.response_text) === null || _entry$response_text === void 0 ? void 0 : _entry$response_text.trim().toLowerCase()) !== 'no response received.' && ((_entry$debug_marker = entry.debug_marker) === null || _entry$debug_marker === void 0 ? void 0 : _entry$debug_marker.trim()) !== '';\n    });\n    // console.log(\"üìú Filtered journal history:\", filtered);  // <== Enable if False \n    setHistory(filtered);\n  };\n  useEffect(() => {\n    if (session) fetchHistory();\n  }, [session]);\n\n  // üîΩ UI State Routing\n  if (!session && !showLogin) {\n    return /*#__PURE__*/_jsxDEV(LandingPage, {\n      onStart: () => setShowLogin(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 12\n    }, this);\n  }\n  if (!session) {\n    return /*#__PURE__*/_jsxDEV(LoginPage, {\n      onAuthSuccess: (session, username) => {\n        setSession(session);\n        setUsername(username);\n        UsernameStore.set(username); // <--persist\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this);\n  }\n\n  // üîΩ Function 7: Generate Handoff Summaries  \n\n  // üîΩ Tone Display Utility\n  const displayTone = mode => {\n    const t = mode === null || mode === void 0 ? void 0 : mode.trim().toLowerCase();\n    return t === 'frank' ? 'üî¥ Frank Friend' : 'üü¢ Marcus Aurelius';\n  };\n  const getToneStyle = mode => {\n    const tone = mode === null || mode === void 0 ? void 0 : mode.trim().toLowerCase();\n    switch (tone) {\n      case 'frank':\n      case 'frank friend':\n        return {\n          backgroundColor: '#fff1f1',\n          borderColor: '#cc0000',\n          label: 'üî¥ Tony'\n        };\n      case 'marcus':\n      case 'marcus aurelius':\n        return {\n          backgroundColor: '#f0fdf4',\n          borderColor: '#2e7d32',\n          label: 'üü¢ Marcus Aurelius'\n        };\n      case 'therapist':\n        return {\n          backgroundColor: '#fef6ff',\n          borderColor: '#b755e5',\n          label: 'üü£ Clara'\n        };\n      case 'movies':\n        return {\n          backgroundColor: '#fdfaf6',\n          borderColor: '#ff8c00',\n          label: 'üé¨ Movie Metaphors Man'\n        };\n      case 'verena':\n        return {\n          backgroundColor: '#ffeaf0',\n          borderColor: '#ec407a',\n          label: 'üå∏ Verena'\n        };\n      default:\n        return {\n          backgroundColor: '#eeeeee',\n          borderColor: '#999999',\n          label: '‚ùì Unknown'\n        };\n    }\n  };\n\n  // Centralize tooltip copy in one place\n  const TOOLTIP_TEXT = {\n    pattern: \"Generates a unified insight based on your recent themes, topics, and emotional loops.\",\n    therapist: \"A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.\",\n    mood: \"Visualizes your emotional trends over time. Coming soon.\"\n  };\n\n  // üîΩ UI Rendering\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [showWelcome && welcomeStep === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        backgroundColor: 'rgba(255,255,255,0.96)',\n        zIndex: 1000,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'column',\n        padding: '2rem',\n        textAlign: 'center',\n        fontFamily: 'sans-serif',\n        overflowY: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: '700px',\n          width: '90%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            marginBottom: '1rem',\n            fontSize: '1.6rem'\n          },\n          children: \"\\u2728 Choose Your Companion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            textAlign: 'left',\n            fontSize: '1rem',\n            marginBottom: '2rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83D\\uDCAA\\uD83C\\uDF77 Tony\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), \" \\u2013 A frank, no-bullshit friend who\\u2019s always honest and supportive, helping you cut through the crap and break free from the loops that keep you stuck.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83E\\uDDD8 Marcus Aurelius\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this), \" \\u2013 Speaks like the Stoic philosopher himself\\u2014calm, sparse, and deeply rooted in principle. If inspired he may quote from his own journal, \", /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"Meditations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 178\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83E\\uDE7A Clara\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this), \" \\u2013 A warm, grounded therapist who sees the pattern beneath the panic.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83C\\uDFAC Movie Metaphor Man\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 15\n            }, this), \" \\u2013 Only thinks in movie metaphors\\u2014no matter what you say. Your problems are part of the hero's journey.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83C\\uDF38 Verena\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 15\n            }, this), \" \\u2013 Verena is a clarity-driven career coach who helps you stop spinning your wheels and start building something real.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowWelcome(false),\n          style: {\n            padding: '0.8rem 1.5rem',\n            fontSize: '1rem',\n            borderRadius: '6px',\n            backgroundColor: '#374151',\n            color: '#fff',\n            border: 'none',\n            cursor: 'pointer'\n          },\n          children: \"Let\\u2019s begin \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 7\n    }, this), !showWelcome && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container background-option-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              marginBottom: '0.3rem',\n              fontSize: '1.8rem',\n              fontWeight: 600,\n              letterSpacing: '0.5px',\n              color: '#1a1a1a',\n              fontFamily: 'Georgia, serif',\n              textShadow: '0 1px 1px rgba(0,0,0,0.1)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mirror-emoji\",\n              role: \"img\",\n              \"aria-label\": \"mirror\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this), ' ', \"Cognitive Mirror\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'inline-block',\n              padding: '0.2rem 0.6rem',\n              fontSize: '0.75rem',\n              color: '#555',\n              backgroundColor: '#f5f5f5',\n              border: '1px solid #ddd',\n              borderRadius: '6px',\n              fontStyle: 'italic'\n            },\n            children: \"\\uD83D\\uDEA7 Rough Beta: Responses can take up to a minute. Thanks for your patience.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.75rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            title: (session === null || session === void 0 ? void 0 : (_session$user = session.user) === null || _session$user === void 0 ? void 0 : _session$user.id) || '',\n            style: {\n              fontSize: '.85rem',\n              color: '#374151',\n              background: '#eef2ff',\n              border: '1px solid #c7d2fe',\n              padding: '4px 8px',\n              borderRadius: '6px',\n              lineHeight: 1.2,\n              whiteSpace: 'nowrap'\n            },\n            children: [\"Signed in as \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: username || '‚Äî'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 520,\n              columnNumber: 26\n            }, this), session !== null && session !== void 0 && (_session$user2 = session.user) !== null && _session$user2 !== void 0 && _session$user2.id ? /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#6b7280',\n                marginLeft: 6\n              },\n              children: [\"(\", session.user.id.slice(0, 8), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 15\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: async () => {\n              await supabase.auth.signOut();\n              setSession(null);\n            },\n            style: {\n              padding: '6px 10px',\n              borderRadius: 6,\n              border: '1px solid #d1d5db',\n              background: '#fff',\n              cursor: 'pointer'\n            },\n            children: \"Log Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 9\n      }, this), window.innerWidth <= 768 && debugInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          top: '10px',\n          left: '10px',\n          right: '10px',\n          background: '#000',\n          color: '#0f0',\n          padding: '10px',\n          borderRadius: '5px',\n          fontSize: '10px',\n          zIndex: 9999,\n          fontFamily: 'monospace',\n          whiteSpace: 'pre-wrap',\n          maxHeight: '200px',\n          overflow: 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDC1B Debug Info:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setDebugInfo(''),\n            style: {\n              background: '#333',\n              color: '#fff',\n              border: 'none',\n              padding: '2px 6px',\n              borderRadius: '3px'\n            },\n            children: \"\\u2715\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 566,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '5px'\n          },\n          children: debugInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `reflection-input-container ${inputExpanded ? 'expanded' : 'collapsed'}`,\n        onClick: () => {\n          console.log('üîç Input container clicked - inputExpanded:', inputExpanded, 'window width:', window.innerWidth);\n          if (!inputExpanded && window.innerWidth <= 768) {\n            console.log('‚úÖ Expanding input on mobile');\n            setInputExpanded(true);\n          }\n        },\n        onTouchStart: e => {\n          console.log('üëÜ Touch start - inputExpanded:', inputExpanded, 'window width:', window.innerWidth);\n          if (!inputExpanded && window.innerWidth <= 768) {\n            console.log('‚úÖ Expanding input on mobile touch');\n            e.preventDefault();\n            setInputExpanded(true);\n          }\n        },\n        style: {\n          touchAction: 'manipulation'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"reflection-textarea\",\n          rows: \"3\",\n          value: entry,\n          onChange: e => {\n            console.log('üìù Textarea onChange:', e.target.value);\n            setEntry(e.target.value);\n          },\n          onFocus: () => console.log('üéØ Textarea focused'),\n          onBlur: () => console.log('üëã Textarea blurred'),\n          onKeyDown: e => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              if (entry.trim() && !isProcessing) {\n                handleSubmit();\n              }\n            }\n            if (e.key === 'Escape' && window.innerWidth <= 768) {\n              setInputExpanded(false);\n            }\n          },\n          placeholder: placeholderPrompt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cm-toolbar\",\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            flexWrap: 'wrap',\n            gap: '8px 12px',\n            padding: '6px 10px',\n            background: '#f2f2f2',\n            border: '1px solid #e6e6e6',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cm-actions\",\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n              flexWrap: 'wrap',\n              position: 'relative'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: handleSubmit,\n              id: \"reflect-btn\",\n              \"aria-label\": \"Reflect\",\n              type: \"button\",\n              disabled: isProcessing || !entry.trim(),\n              children: \"\\uD83E\\uDDE0 Reflect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 646,\n              columnNumber: 15\n            }, this), window.innerWidth <= 768 && inputExpanded && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: () => setInputExpanded(false),\n              \"aria-label\": \"Close\",\n              type: \"button\",\n              children: \"\\u2715 Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: handlePatternInsight,\n              onMouseEnter: () => setTooltipVisible('pattern'),\n              onMouseLeave: () => setTooltipVisible(null),\n              children: \"\\uD83E\\uDDED See Pattern Insight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: () => setShowSummary(true),\n              onMouseEnter: () => setTooltipVisible('therapist'),\n              onMouseLeave: () => setTooltipVisible(null),\n              children: \"\\uD83E\\uDE7A Therapist Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 676,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: handleOpenMoodTracker /* your existing handler */,\n              onMouseEnter: () => setTooltipVisible('mood'),\n              onMouseLeave: () => setTooltipVisible(null),\n              children: \"\\uD83D\\uDCCA Mood Tracker\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 15\n            }, this), tooltipVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                top: '-2.4rem',\n                left: '50%',\n                transform: 'translateX(-50%)',\n                background: '#333',\n                color: '#fff',\n                padding: '0.4rem 0.6rem',\n                borderRadius: 6,\n                fontSize: '0.75rem',\n                whiteSpace: 'nowrap',\n                zIndex: 20,\n                pointerEvents: 'none'\n              },\n              children: [tooltipVisible === 'pattern' && 'Generates a unified insight based on your recent themes, topics, and emotional loops.', tooltipVisible === 'therapist' && 'A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.', tooltipVisible === 'mood' && 'Visualizes your emotional trends over time.']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 17\n            }, this), isListening && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83C\\uDFA7 Listening\\u2026\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 720,\n              columnNumber: 31\n            }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"processing-message\",\n              children: [\"\\u23F3 \", toneName(forcedTone), \" is thinking\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dots\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 723,\n                columnNumber: 55\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 722,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cm-voice\",\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px 10px',\n              flexWrap: 'wrap',\n              borderLeft: '1px solid #e6e6e6',\n              paddingLeft: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                marginRight: '0.35rem'\n              },\n              children: \"\\uD83D\\uDDE3\\uFE0F Voice:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 740,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: forcedTone,\n              onChange: handleToneChange,\n              \"aria-label\": \"Select voice\",\n              style: {\n                minWidth: 120,\n                maxWidth: 160,\n                padding: '6px 8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"therapist\",\n                children: \"Clara\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 747,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"marcus\",\n                children: \"Marcus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 748,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"frank\",\n                children: \"Tony\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 749,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"movies\",\n                children: \"Movies\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 750,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"verena\",\n                children: \"Verena\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cm-tone-desc\",\n              \"aria-live\": \"polite\",\n              children: toneDescription\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          paddingBottom: window.innerWidth <= 768 ? '0.5rem' : '2rem',\n          WebkitOverflowScrolling: 'touch',\n          // Smooth scrolling on iOS\n          // Remove smooth scroll to prevent zoom interference\n          scrollBehavior: 'auto',\n          touchAction: 'pan-x pan-y pinch-zoom' // Allow pinch-zoom\n        },\n        children: /*#__PURE__*/_jsxDEV(JournalTimeline, {\n          userId: session === null || session === void 0 ? void 0 : (_session$user3 = session.user) === null || _session$user3 === void 0 ? void 0 : _session$user3.id,\n          refreshTrigger: refreshTrigger,\n          styleVariant: styleVariant\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 775,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 766,\n        columnNumber: 9\n      }, this), showSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '1rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(SummaryViewer, {\n          history: history,\n          onClose: () => setShowSummary(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 780,\n        columnNumber: 11\n      }, this), showMoodTracker && /*#__PURE__*/_jsxDEV(MoodModal, {\n        userId: session === null || session === void 0 ? void 0 : (_session$user4 = session.user) === null || _session$user4 === void 0 ? void 0 : _session$user4.id,\n        onClose: handleCloseMoodTracker\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s4(App, \"RVjncqsQbflSDKagqSM9wungprg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","SummaryViewer","supabase","UsernameStore","getBootSession","subscribeAuth","LandingPage","LoginPage","JournalTimeline","MoodModal","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s4","_session$user","_session$user2","_session$user3","_session$user4","toneDescriptions","therapist","marcus","frank","movies","verena","forcedTone","setForcedTone","toneDescription","setToneDescription","handleToneChange","e","val","target","value","toneName","t","showLogin","setShowLogin","session","setSession","entry","setEntry","history","setHistory","tooltip","setTooltip","latestEntryId","setLatestEntryId","showSummary","setShowSummary","loadingSummary","setLoadingSummary","summary","setSummary","parsedTags","setParsedTags","severityLevel","setSeverityLevel","isProcessing","setIsProcessing","recognition","setRecognition","inputExpanded","setInputExpanded","debugInfo","setDebugInfo","isListening","setIsListening","prompts","showGroupedView","setShowGroupedView","placeholderPrompt","setPlaceholderPrompt","Math","floor","random","length","refreshTrigger","setRefreshTrigger","transcriptBuffer","tooltipVisible","setTooltipVisible","styleVariant","setStyleVariant","showWelcome","setShowWelcome","welcomeStep","setWelcomeStep","username","setUsername","showMoodTracker","setShowMoodTracker","handleCloseMoodTracker","handleOpenMoodTracker","saved","get","console","log","process","env","REACT_APP_ENV","REACT_APP_BACKEND_URL","REACT_APP_SUPABASE_URL","hasTriggeredSummary","localStorage","getItem","setItem","fetch","then","res","text","stop","handleSubmit","_s","_s2","_s2$user","_s3","warn","window","innerWidth","trim","u","s","guardRails","hasSession","user","hasEntry","hasUsername","sessionUser","id","JSON","stringify","setProcessingMessage","debug_marker","toString","substring","userId","backendUrl","apiDetails","entryLength","_navigator$connection","navigator","userAgent","connection","effectiveType","testResponse","method","timeout","status","healthErr","message","Promise","resolve","setTimeout","wakeErr","requestBody","entry_text","tone_mode","user_id","headers","location","origin","mode","credentials","body","responseInfo","statusText","ok","Object","fromEntries","entries","errorText","data","json","responseText","response","err","_err$constructor","errorDetails","name","stack","constructor","includes","fetchHistory","prev","processingMessage","handlePatternInsight","_userData$user","userData","auth","getUser","insight","error","from","select","eq","order","ascending","showAll","filtered","filter","_entry$response_text","_entry$debug_marker","response_text","toLowerCase","onStart","fileName","_jsxFileName","lineNumber","columnNumber","onAuthSuccess","set","displayTone","getToneStyle","tone","backgroundColor","borderColor","label","TOOLTIP_TEXT","pattern","mood","children","style","position","top","left","width","height","zIndex","display","justifyContent","alignItems","flexDirection","padding","textAlign","fontFamily","overflowY","maxWidth","marginBottom","fontSize","onClick","borderRadius","color","border","cursor","className","fontWeight","letterSpacing","textShadow","role","fontStyle","gap","title","background","lineHeight","whiteSpace","marginLeft","slice","signOut","right","maxHeight","overflow","marginTop","onTouchStart","preventDefault","touchAction","rows","onChange","onFocus","onBlur","onKeyDown","key","shiftKey","placeholder","flexWrap","type","disabled","onMouseEnter","onMouseLeave","transform","pointerEvents","borderLeft","paddingLeft","marginRight","minWidth","flex","paddingBottom","WebkitOverflowScrolling","scrollBehavior","onClose","_c","$RefreshReg$"],"sources":["/Users/mac/Projects/cognitive-mirror-frontend-dev/src/App.js"],"sourcesContent":["// üîº Imports and Setup      \nimport React, { useEffect, useState } from 'react'; \nimport SummaryViewer from './SummaryViewer'; \nimport { supabase, UsernameStore, getBootSession, subscribeAuth } from './supabaseClient';\nimport './App.css';\n// import DemoSofia from './pages/DemoSofia';\nimport LandingPage from './LandingPage';\nimport LoginPage from './LoginPage';\nimport JournalTimeline from './components/JournalTimeline';\nimport MoodModal from './components/MoodModal'; \n\nconst App = () => {\n\n  // --- Tone descriptions map ---\n  const toneDescriptions = {\n    therapist: \"ü©∫ Clara ‚Äì A warm, grounded therapist who sees the pattern beneath the panic.\",\n    marcus: \"üßò Marcus ‚Äì Speaks like the Stoic philosopher himself. Will quote Meditations.\",\n    frank: \"üí™üç∑ Tony ‚Äì A frank, no-bullshit friend who tells you what you need to hear.\",\n    movies: \"üé¨ Movies ‚Äì A movie buff who only speaks through movie metaphors.\",\n    verena: \"üå∏ Verena ‚Äì A clarity-driven life coach unphased by self-pity.\"\n  };\n\n  // Default to Clara\n  const [forcedTone, setForcedTone] = useState(\"therapist\");\n  // Keep a visible description bound to the current selection\n  const [toneDescription, setToneDescription] = useState(toneDescriptions[\"therapist\"]);\n\n  const handleToneChange = (e) => {\n    const val = e.target.value;\n    setForcedTone(val);\n    setToneDescription(toneDescriptions[val] || \"\");\n  };\n\n  const toneName = (t) =>\n  ({ therapist: 'Clara', marcus: 'Marcus', frank: 'Tony', movies: 'Movies', verena: 'Verena' }[t] || 'Mirror');\n\n  // üîΩ Existing states (no change to their order beyond moving forcedTone here)\n  const [showLogin, setShowLogin] = useState(false);\n  const [session, setSession] = useState(null);\n  const [entry, setEntry] = useState('');\n  const [history, setHistory] = useState([]);\n  const [tooltip, setTooltip] = useState(\"ü©∫ Clara ‚Äì A warm, grounded therapist who sees the pattern beneath the panic.\");\n  const [latestEntryId, setLatestEntryId] = useState(null);\n  const [showSummary, setShowSummary] = useState(false);\n  const [loadingSummary, setLoadingSummary] = useState(false);\n  const [summary, setSummary] = useState('');\n  const [parsedTags, setParsedTags] = useState([]);\n  const [severityLevel, setSeverityLevel] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [recognition, setRecognition] = useState(null);\n  const [inputExpanded, setInputExpanded] = useState(false);\n  const [debugInfo, setDebugInfo] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const prompts = [\"What‚Äôs shaking sugar?\"];\n  const [showGroupedView, setShowGroupedView] = useState(false);\n  const [placeholderPrompt, setPlaceholderPrompt] = useState(() =>\n    prompts[Math.floor(Math.random() * prompts.length)] \n  );\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  let transcriptBuffer = '';\n  const [tooltipVisible, setTooltipVisible] = useState(null); // 'pattern' | 'therapist' | 'mood' | null\n  const [styleVariant, setStyleVariant] = useState(\"D\")\n  const [showWelcome, setShowWelcome] = useState(false);\n  const [welcomeStep, setWelcomeStep] =useState(1);\n  const [username, setUsername] = useState('');\n  const [showMoodTracker, setShowMoodTracker] = useState(false);\n  const handleCloseMoodTracker = () => setShowMoodTracker(false);\n  const handleOpenMoodTracker = () => setShowMoodTracker(true);\n\n  // üîΩ Function 1: Load Saved Username (rehydrate)\n  useEffect(() => {\n    const saved = UsernameStore.get();\n    if (saved) setUsername(saved);\n  }, []);\n\n    // Log environment on startup\n  useEffect(() => {\n    console.log(`üöÄ Running in ${process.env.REACT_APP_ENV || 'unknown'} mode`);\n    console.log(`üõ∞Ô∏è Backend: ${process.env.REACT_APP_BACKEND_URL || 'unset'}`);\n    console.log(`üóÑÔ∏è Supabase: ${process.env.REACT_APP_SUPABASE_URL || 'unset'}`);\n  }, []);\n  \n  // üîΩ Function 3: Show Summary Trigger\n  useEffect(() => {\n    const hasTriggeredSummary = localStorage.getItem('hasTriggeredSummary');\n    if (!hasTriggeredSummary && history.length >= 5) {\n      setShowSummary(true);\n      localStorage.setItem('hasTriggeredSummary', 'true');\n    }\n  }, [history]);\n\n   // üîΩ Function 3a: Build Current Commit Tag \n  useEffect(() => {\n    fetch('/build-version.txt')\n      .then(res => res.text())\n      .then(text => {\n         console.log(\"üõ†Ô∏è App.js version:\", text);\n         // console.log(`üß± Frontend build version: ${text}`);\n      });\n  }, []);\n\n  // üîΩ Function 4: Auth Setup (boot + subscribe once)\n    useEffect(() => {\n      let stop = () => {};\n      (async () => {\n        setSession(await getBootSession());\n        stop = subscribeAuth(setSession);\n      })();\n      return () => stop();\n    }, []);\n\n // üîΩ Function 5: Submit New Journal Entry (username/session‚Äìsafe)\n  const handleSubmit = async () => {\n    console.warn(\"üß™ handleSubmit called from device width:\", window.innerWidth);\n    console.log(\"üìù Entry content:\", entry.trim());\n\n    // Always read a stable username\n    const u = (username || UsernameStore.get() || '').trim();\n\n    // Make sure we have a session\n    let s = session;\n    if (!s) {\n      s = await getBootSession();\n      if (s) setSession(s);\n    }\n\n    // Guard rails: must have session + entry + username\n    const guardRails = { \n      hasSession: !!s?.user, \n      hasEntry: !!entry.trim(), \n      hasUsername: !!u,\n      sessionUser: s?.user?.id,\n      username: u,\n      entry: entry.trim()\n    };\n    \n    setDebugInfo(`üîç Guard Rails: ${JSON.stringify(guardRails, null, 2)}`);\n    \n    if (!s?.user || !entry.trim() || !u) {\n      setDebugInfo('‚ùå Guard rails failed - missing required data');\n      return;\n    }\n\n    setDebugInfo('üöÄ Starting submission...');\n    setProcessingMessage(`‚è≥ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n\n    const debug_marker = Math.random().toString(36).substring(2, 8);\n    const userId = s.user.id;\n    const backendUrl = process.env.REACT_APP_BACKEND_URL;\n    \n    const apiDetails = { \n      backendUrl, \n      userId, \n      debug_marker,\n      entryLength: entry.length\n    };\n    \n    setDebugInfo(`üì° API: ${JSON.stringify(apiDetails, null, 2)}`);\n\n    try {\n      // First, let's test if we can reach the backend URL at all\n      if (!backendUrl) {\n        setDebugInfo('‚ùå Backend URL is undefined!');\n        return;\n      }\n      \n      setDebugInfo(`üì§ Testing connection to: ${backendUrl}\\nüåê User Agent: ${navigator.userAgent}\\nüì° Network: ${navigator.connection?.effectiveType || 'unknown'}`);\n      \n      // Test basic connectivity first\n      try {\n        const testResponse = await fetch(`${backendUrl}/health`, { \n          method: 'GET',\n          timeout: 10000 // 10 second timeout\n        });\n        setDebugInfo(`‚úÖ Health check: ${testResponse.status}`);\n      } catch (healthErr) {\n        setDebugInfo(`‚ùå Health check failed: ${healthErr.message}\\nüîÑ Server might be sleeping - trying to wake it up...`);\n        \n        // Try to wake up the server by hitting the main endpoint\n        try {\n          await fetch(`${backendUrl}/`, { method: 'GET' });\n          setDebugInfo(`üîÑ Wake-up call sent. Waiting 5 seconds for server to start...`);\n          await new Promise(resolve => setTimeout(resolve, 5000));\n        } catch (wakeErr) {\n          setDebugInfo(`‚ùå Cannot wake server: ${wakeErr.message}`);\n        }\n      }\n      \n      setDebugInfo('üì§ Making journal-entry request...');\n      \n      const requestBody = {\n        entry_text: entry,\n        tone_mode: forcedTone,\n        username: u,\n        user_id: userId,\n        debug_marker,\n      };\n      \n      setDebugInfo(`üì¶ Request body: ${JSON.stringify(requestBody, null, 2)}`);\n      \n      const res = await fetch(`${backendUrl}/journal-entry`, {\n        method: 'POST',\n        headers: { \n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n          'User-Agent': navigator.userAgent,\n          'Origin': window.location.origin\n        },\n        mode: 'cors',\n        credentials: 'omit',\n        body: JSON.stringify(requestBody),\n      });\n\n      const responseInfo = { \n        status: res.status, \n        statusText: res.statusText,\n        ok: res.ok,\n        headers: Object.fromEntries(res.headers.entries())\n      };\n      \n      setDebugInfo(`üì• Response: ${JSON.stringify(responseInfo, null, 2)}`);\n\n      if (!res.ok) {\n        const errorText = await res.text();\n        setDebugInfo(`‚ùå Error Response: ${res.status} ${res.statusText}\\nBody: ${errorText}`);\n        return;\n      }\n\n      const data = await res.json();\n      setDebugInfo(`‚úÖ Success: ${JSON.stringify(data, null, 2)}`);\n      const responseText = data.response || 'No response received.';\n    } catch (err) {\n      const errorDetails = {\n        message: err.message || 'Unknown error',\n        name: err.name || 'Unknown',\n        stack: err.stack || 'No stack trace',\n        toString: err.toString(),\n        constructor: err.constructor?.name || 'Unknown constructor'\n      };\n      \n      setDebugInfo(`‚ùå Detailed Error: ${JSON.stringify(errorDetails, null, 2)}`);\n      \n      // Additional specific error checks\n      if (err.name === 'TypeError' && err.message.includes('fetch')) {\n        setDebugInfo(`‚ùå Network Error: Cannot connect to ${backendUrl}\\nThis might be a CORS or connectivity issue.`);\n      }\n    } finally {\n      setEntry('');\n      setParsedTags([]);\n      setSeverityLevel('');\n      setIsProcessing(false);\n      setTimeout(fetchHistory, 300);\n      setRefreshTrigger(prev => prev + 1);\n      // Collapse input on mobile after successful submission\n      if (window.innerWidth <= 768) {\n        setInputExpanded(false);\n      }\n    }\n  };\n\n  // üîΩ Function 5b: Generate Pattern Insight\n  const [processingMessage, setProcessingMessage] = useState(\"\");\n  \n  const handlePatternInsight = async () => {\n    setProcessingMessage(`‚è≥ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n  \n    try {\n      const { data: userData } = await supabase.auth.getUser();\n      const userId = userData.user?.id;\n      \n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/generate-pattern-insight`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          user_id: userId,\n          tone_mode: forcedTone // ‚úÖ pass selected voice\n        })\n      });\n  \n      const data = await response.json();\n  \n      if (response.ok) {\n        console.log('‚úÖ Insight:', data.insight);\n        setRefreshTrigger(prev => prev + 1); // üîÅ trigger timeline refresh\n      } else {\n        console.error('‚ùå Insight error:', data.error);\n      }\n    } catch (err) {\n      console.error('‚ùå Insight fetch failed:', err);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  \n   // üîΩ Function 6: Fetch Past Journals\n  const fetchHistory = async () => {\n    const user = session?.user;\n    if (!user) return;\n    const { data, error } = await supabase\n      .from('journals')\n      .select('id, entry_text, response_text, primary_theme, secondary_theme, tone_mode, timestamp, debug_marker')\n      .eq('user_id', user.id)\n      .order('timestamp', { ascending: false });\n      \n    if (error) {\n    console.error(\"‚ùå Error fetching history:\", error.message);\n    return;\n  }\n\n  // üîΩ Function 6a: Filter Out No Respose, No debug markers \n\n  const showAll = true; // <== True all entries, False filtered \n  const filtered = showAll\n    ? (data || [])\n    : (data || []).filter(entry =>\n    entry.response_text?.trim().toLowerCase() !== 'no response received.' &&\n    entry.debug_marker?.trim() !== ''\n  );\n  // console.log(\"üìú Filtered journal history:\", filtered);  // <== Enable if False \n  setHistory(filtered);\n};\n\n  useEffect(() => {\n    if (session) fetchHistory();\n  }, [session]);\n\n  // üîΩ UI State Routing\n  if (!session && !showLogin) {\n    return <LandingPage onStart={() => setShowLogin(true)} />;\n  }\n\n  if (!session) {\n    return (\n      <LoginPage\n        onAuthSuccess={(session, username) => {\n          setSession(session);\n          setUsername(username);\n          UsernameStore.set(username); // <--persist\n        }}\n      />\n    );\n  }\n\n// üîΩ Function 7: Generate Handoff Summaries  \n\n  // üîΩ Tone Display Utility\n  const displayTone = (mode) => {\n    const t = mode?.trim().toLowerCase();\n    return t === 'frank' ? 'üî¥ Frank Friend' : 'üü¢ Marcus Aurelius';\n  };\n\n  const getToneStyle = (mode) => {\n    const tone = mode?.trim().toLowerCase();\n    switch (tone) {\n      case 'frank':\n      case 'frank friend':\n        return {\n          backgroundColor: '#fff1f1',\n          borderColor: '#cc0000',\n          label: 'üî¥ Tony',\n        };\n      case 'marcus':\n      case 'marcus aurelius':\n        return {\n          backgroundColor: '#f0fdf4',\n          borderColor: '#2e7d32',\n          label: 'üü¢ Marcus Aurelius',\n        };\n      case 'therapist':\n        return {\n          backgroundColor: '#fef6ff',\n          borderColor: '#b755e5',\n          label: 'üü£ Clara',\n        };\n      case 'movies':\n        return {\n          backgroundColor: '#fdfaf6',\n          borderColor: '#ff8c00',\n          label: 'üé¨ Movie Metaphors Man',\n        };\n      case 'verena':\n          return {\n            backgroundColor: '#ffeaf0',\n            borderColor: '#ec407a',\n            label: 'üå∏ Verena',\n        };  \n      default:\n        return {\n          backgroundColor: '#eeeeee',\n          borderColor: '#999999',\n          label: '‚ùì Unknown',\n        };\n    }\n  };\n\n    // Centralize tooltip copy in one place\n    const TOOLTIP_TEXT = {\n      pattern: \"Generates a unified insight based on your recent themes, topics, and emotional loops.\",\n      therapist: \"A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.\",\n      mood: \"Visualizes your emotional trends over time. Coming soon.\"\n    };\n\n// üîΩ UI Rendering\nreturn (\n  <>\n    {/* Step 1: Voice Introduction + Begin */}\n    {showWelcome && welcomeStep === 1 && (\n      <div\n        style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          backgroundColor: 'rgba(255,255,255,0.96)',\n          zIndex: 1000,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          flexDirection: 'column',\n          padding: '2rem',\n          textAlign: 'center',\n          fontFamily: 'sans-serif',\n          overflowY: 'auto'\n        }}\n      >\n        <div style={{ maxWidth: '700px', width: '90%' }}>\n          <h2 style={{ marginBottom: '1rem', fontSize: '1.6rem' }}>‚ú® Choose Your Companion</h2>\n          <ul style={{ textAlign: 'left', fontSize: '1rem', marginBottom: '2rem' }}>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>üí™üç∑ Tony</b> ‚Äì A frank, no-bullshit friend who‚Äôs always honest and supportive, helping you cut through the crap and break free from the loops that keep you stuck.\n            </li>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>üßò Marcus Aurelius</b> ‚Äì Speaks like the Stoic philosopher himself‚Äîcalm, sparse, and deeply rooted in principle. If inspired he may quote from his own journal, <i>Meditations</i>.\n            </li>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>ü©∫ Clara</b> ‚Äì A warm, grounded therapist who sees the pattern beneath the panic.\n            </li>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>üé¨ Movie Metaphor Man</b> ‚Äì Only thinks in movie metaphors‚Äîno matter what you say. Your problems are part of the hero's journey.\n            </li>\n            <li style={{ marginBottom: '1.5rem' }}>\n              <b>üå∏ Verena</b> ‚Äì Verena is a clarity-driven career coach who helps you stop spinning your wheels and start building something real.\n            </li>\n          </ul>\n\n          <button\n            onClick={() => setShowWelcome(false)}\n            style={{\n              padding: '0.8rem 1.5rem',\n              fontSize: '1rem',\n              borderRadius: '6px',\n              backgroundColor: '#374151',\n              color: '#fff',\n              border: 'none',\n              cursor: 'pointer'\n            }}\n          >\n            Let‚Äôs begin ‚Üí\n          </button>\n        </div>\n      </div>\n    )}\n\n    {/* MAIN APP INTERFACE ‚Äî Only render when welcome is dismissed */}\n    {!showWelcome && (\n      <div className=\"chat-container background-option-1\">\n        {/* Header with Logout */}\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <div>\n            <h1\n              style={{\n                marginBottom: '0.3rem',\n                fontSize: '1.8rem',\n                fontWeight: 600,\n                letterSpacing: '0.5px',\n                color: '#1a1a1a',\n                fontFamily: 'Georgia, serif',\n                textShadow: '0 1px 1px rgba(0,0,0,0.1)'\n              }}\n            >\n              <span className=\"mirror-emoji\" role=\"img\" aria-label=\"mirror\">\n              </span>{' '}\n              Cognitive Mirror\n            </h1>\n\n            <div\n              style={{\n                display: 'inline-block',\n                padding: '0.2rem 0.6rem',\n                fontSize: '0.75rem',\n                color: '#555',\n                backgroundColor: '#f5f5f5',\n                border: '1px solid #ddd',\n                borderRadius: '6px',\n                fontStyle: 'italic'\n              }}\n            >\n               üöß Rough Beta: Responses can take up to a minute. Thanks for your patience.\n            </div>\n          </div>\n  \n        {/* Username and Logout Button Placement Top Right */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\n          <div\n            title={session?.user?.id || ''}\n            style={{\n              fontSize: '.85rem',\n              color: '#374151',\n              background: '#eef2ff',\n              border: '1px solid #c7d2fe',\n              padding: '4px 8px',\n              borderRadius: '6px',\n              lineHeight: 1.2,\n              whiteSpace: 'nowrap'\n            }}\n          >\n            Signed in as <strong>{username || '‚Äî'}</strong>\n            {session?.user?.id ? (\n              <span style={{ color: '#6b7280', marginLeft: 6 }}>\n                ({(session.user.id).slice(0, 8)})\n              </span>\n            ) : null}\n          </div>\n\n          <button\n            onClick={async () => {\n              await supabase.auth.signOut();\n              setSession(null);\n            }}\n            style={{\n              padding: '6px 10px',\n              borderRadius: 6,\n              border: '1px solid #d1d5db',\n              background: '#fff',\n              cursor: 'pointer'\n            }}\n          >\n            Log Out\n          </button>\n        </div>\n        </div>\n\n        {/* Debug Panel for Mobile (only show on mobile and when there's debug info) */}\n        {window.innerWidth <= 768 && debugInfo && (\n          <div style={{\n            position: 'fixed',\n            top: '10px',\n            left: '10px',\n            right: '10px',\n            background: '#000',\n            color: '#0f0',\n            padding: '10px',\n            borderRadius: '5px',\n            fontSize: '10px',\n            zIndex: 9999,\n            fontFamily: 'monospace',\n            whiteSpace: 'pre-wrap',\n            maxHeight: '200px',\n            overflow: 'auto'\n          }}>\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n              <strong>üêõ Debug Info:</strong>\n              <button \n                onClick={() => setDebugInfo('')}\n                style={{ background: '#333', color: '#fff', border: 'none', padding: '2px 6px', borderRadius: '3px' }}\n              >\n                ‚úï\n              </button>\n            </div>\n            <div style={{ marginTop: '5px' }}>{debugInfo}</div>\n          </div>\n        )}\n\n        {/* Sticky Input Bar (fixed) */}\n        <div\n          className={`reflection-input-container ${inputExpanded ? 'expanded' : 'collapsed'}`}\n          onClick={() => {\n            console.log('üîç Input container clicked - inputExpanded:', inputExpanded, 'window width:', window.innerWidth);\n            if (!inputExpanded && window.innerWidth <= 768) {\n              console.log('‚úÖ Expanding input on mobile');\n              setInputExpanded(true);\n            }\n          }}\n          onTouchStart={(e) => {\n            console.log('üëÜ Touch start - inputExpanded:', inputExpanded, 'window width:', window.innerWidth);\n            if (!inputExpanded && window.innerWidth <= 768) {\n              console.log('‚úÖ Expanding input on mobile touch');\n              e.preventDefault();\n              setInputExpanded(true);\n            }\n          }}\n          style={{ touchAction: 'manipulation' }}\n        >\n          <textarea\n          className=\"reflection-textarea\"\n          rows=\"3\"\n          value={entry}\n          onChange={(e) => {\n            console.log('üìù Textarea onChange:', e.target.value);\n            setEntry(e.target.value);\n          }}\n          onFocus={() => console.log('üéØ Textarea focused')}\n          onBlur={() => console.log('üëã Textarea blurred')}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              if (entry.trim() && !isProcessing) {\n                handleSubmit();\n              }\n            }\n            if (e.key === 'Escape' && window.innerWidth <= 768) {\n              setInputExpanded(false);\n            }\n          }}\n          placeholder={placeholderPrompt}\n        />\n          {/* Toolbar row: all action buttons on one line */}\n          <div\n            className=\"cm-toolbar\"\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              flexWrap: 'wrap',\n              gap: '8px 12px',\n              padding: '6px 10px',\n              background: '#f2f2f2',\n              border: '1px solid #e6e6e6',\n              borderRadius: '6px'\n            }}\n          >\n            {/* Action buttons (one row) */}\n            <div\n              className=\"cm-actions\"\n              style={{ display: 'flex', alignItems: 'center', gap: 8, flexWrap: 'wrap', position: 'relative' }}\n            >\n              {/* <button className=\"cm-btn\" onClick={startListening} disabled={isListening}>\n                üéôÔ∏è Start\n              </button>\n              <button className=\"cm-btn\" onClick={stopListening} disabled={!isListening}>\n                üõë Stop\n          </button> */}\n          \n              <button \n                  className=\"cm-btn\" \n                  onClick={handleSubmit}\n                  id=\"reflect-btn\"\n                  aria-label=\"Reflect\"\n                  type=\"button\" \n                  disabled={isProcessing || !entry.trim()}>\n                üß† Reflect\n              </button>\n\n              {/* Mobile close button when expanded */}\n              {window.innerWidth <= 768 && inputExpanded && (\n                <button \n                  className=\"cm-btn\" \n                  onClick={() => setInputExpanded(false)}\n                  aria-label=\"Close\"\n                  type=\"button\">\n                  ‚úï Close\n                </button>\n              )}\n\n              <button\n                className=\"cm-btn\"\n                onClick={handlePatternInsight}\n                onMouseEnter={() => setTooltipVisible('pattern')}\n                onMouseLeave={() => setTooltipVisible(null)}\n              >\n                üß≠ See Pattern Insight\n              </button>\n\n              <button\n                className=\"cm-btn\"\n                onClick={() => setShowSummary(true)}\n                onMouseEnter={() => setTooltipVisible('therapist')}\n                onMouseLeave={() => setTooltipVisible(null)}\n              >\n                ü©∫ Therapist Summary\n              </button>\n\n              <button\n                className=\"cm-btn\"\n                onClick={handleOpenMoodTracker /* your existing handler */}\n                onMouseEnter={() => setTooltipVisible('mood')}\n                onMouseLeave={() => setTooltipVisible(null)}\n              >\n                üìä Mood Tracker\n              </button>\n\n              {/* Shared tooltip renderer for the three buttons */}\n              {tooltipVisible && (\n                <div\n                  style={{\n                    position: 'absolute',\n                    top: '-2.4rem',\n                    left: '50%',\n                    transform: 'translateX(-50%)',\n                    background: '#333',\n                    color: '#fff',\n                    padding: '0.4rem 0.6rem',\n                    borderRadius: 6,\n                    fontSize: '0.75rem',\n                    whiteSpace: 'nowrap',\n                    zIndex: 20,\n                    pointerEvents: 'none'\n                  }}\n                >\n                  {tooltipVisible === 'pattern' &&\n                    'Generates a unified insight based on your recent themes, topics, and emotional loops.'}\n                  {tooltipVisible === 'therapist' &&\n                    'A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.'}\n                  {tooltipVisible === 'mood' && 'Visualizes your emotional trends over time.'}\n                </div>\n              )}\n\n              {isListening && <span>üéß Listening‚Ä¶</span>}\n              {isProcessing && (\n                <div className=\"processing-message\">\n                  ‚è≥ {toneName(forcedTone)} is thinking<span className=\"dots\"></span>\n                </div>\n              )}\n            </div>\n\n            {/* Voice cluster with subtle separation and a narrower select */}\n            <div\n              className=\"cm-voice\"\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px 10px',\n                flexWrap: 'wrap',\n                borderLeft: '1px solid #e6e6e6',\n                paddingLeft: 12\n              }}\n            >\n              <label style={{ marginRight: '0.35rem' }}>üó£Ô∏è Voice:</label>\n              <select\n                value={forcedTone}\n                onChange={handleToneChange}\n                aria-label=\"Select voice\"\n                style={{ minWidth: 120, maxWidth: 160, padding: '6px 8px' }}\n              >\n                <option value=\"therapist\">Clara</option>\n                <option value=\"marcus\">Marcus</option>\n                <option value=\"frank\">Tony</option>\n                <option value=\"movies\">Movies</option>\n                <option value=\"verena\">Verena</option>\n              </select>\n              <div\n                className=\"cm-tone-desc\"\n                aria-live=\"polite\"\n              >\n                {toneDescription}\n              </div>\n            </div>\n          </div>\n          {/* END toolbar */}\n        </div>\n        {/* END fixed input container */}\n\n        {/* Timeline (outside the fixed container) */}\n        <div style={{ \n          flex: 1, \n          overflowY: 'auto', \n          paddingBottom: window.innerWidth <= 768 ? '0.5rem' : '2rem',\n          WebkitOverflowScrolling: 'touch', // Smooth scrolling on iOS\n          // Remove smooth scroll to prevent zoom interference\n          scrollBehavior: 'auto',\n          touchAction: 'pan-x pan-y pinch-zoom' // Allow pinch-zoom\n        }}>\n          <JournalTimeline userId={session?.user?.id} refreshTrigger={refreshTrigger} styleVariant={styleVariant} />\n        </div>\n\n        {/* Summary Viewer */}\n        {showSummary && (\n          <div style={{ marginTop: '1rem' }}>\n            <SummaryViewer history={history} onClose={() => setShowSummary(false)} />\n          </div>\n        )}\n        {/* Mood Tracker Model */}\n        {showMoodTracker && (\n          <MoodModal\n            userId={session?.user?.id}\n            onClose={handleCloseMoodTracker}\n          />\n        )}\n      </div>\n    )}\n  </>\n);\n}\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}