{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Projects/cognitive-mirror-frontend-dev/src/App.js\",\n  _s2 = $RefreshSig$();\n// ğŸ”¼ Imports and Setup      \nimport React, { useEffect, useState } from 'react';\nimport SummaryViewer from './SummaryViewer';\nimport { supabase, UsernameStore, getBootSession, subscribeAuth } from './supabaseClient';\nimport './App.css';\n// import DemoSofia from './pages/DemoSofia';\nimport LandingPage from './LandingPage';\nimport LoginPage from './LoginPage';\nimport JournalTimeline from './components/JournalTimeline';\nimport MoodModal from './components/MoodModal';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s2();\n  var _session$user, _session$user2, _session$user3, _session$user4;\n  // --- Tone descriptions map ---\n  const toneDescriptions = {\n    therapist: \"ğŸ©º Clara â€“ A warm, grounded therapist who sees the pattern beneath the panic.\",\n    marcus: \"ğŸ§˜ Marcus â€“ Speaks like the Stoic philosopher himself. Will quote Meditations.\",\n    frank: \"ğŸ’ªğŸ· Tony â€“ A frank, no-bullshit friend who tells you what you need to hear.\",\n    movies: \"ğŸ¬ Movies â€“ A movie buff who only speaks through movie metaphors.\",\n    verena: \"ğŸŒ¸ Verena â€“ A clarity-driven life coach unphased by self-pity.\"\n  };\n\n  // Default to Clara\n  const [forcedTone, setForcedTone] = useState(\"therapist\");\n  // Keep a visible description bound to the current selection\n  const [toneDescription, setToneDescription] = useState(toneDescriptions[\"therapist\"]);\n  const handleToneChange = e => {\n    const val = e.target.value;\n    setForcedTone(val);\n    setToneDescription(toneDescriptions[val] || \"\");\n  };\n  const toneName = t => ({\n    therapist: 'Clara',\n    marcus: 'Marcus',\n    frank: 'Tony',\n    movies: 'Movies',\n    verena: 'Verena'\n  })[t] || 'Mirror';\n\n  // ğŸ”½ Existing states (no change to their order beyond moving forcedTone here)\n  const [showLogin, setShowLogin] = useState(false);\n  const [session, setSession] = useState(null);\n  const [entry, setEntry] = useState('');\n  const [history, setHistory] = useState([]);\n  const [tooltip, setTooltip] = useState(\"ğŸ©º Clara â€“ A warm, grounded therapist who sees the pattern beneath the panic.\");\n  const [latestEntryId, setLatestEntryId] = useState(null);\n  const [showSummary, setShowSummary] = useState(false);\n  const [loadingSummary, setLoadingSummary] = useState(false);\n  const [summary, setSummary] = useState('');\n  const [parsedTags, setParsedTags] = useState([]);\n  const [severityLevel, setSeverityLevel] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [recognition, setRecognition] = useState(null);\n  const [isListening, setIsListening] = useState(false);\n  const prompts = [\"Whatâ€™s shaking sugar?\"];\n  const [showGroupedView, setShowGroupedView] = useState(false);\n  const [placeholderPrompt, setPlaceholderPrompt] = useState(() => prompts[Math.floor(Math.random() * prompts.length)]);\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  let transcriptBuffer = '';\n  const [tooltipVisible, setTooltipVisible] = useState(null); // 'pattern' | 'therapist' | 'mood' | null\n  const [styleVariant, setStyleVariant] = useState(\"D\");\n  const [showWelcome, setShowWelcome] = useState(false);\n  const [welcomeStep, setWelcomeStep] = useState(1);\n  const [username, setUsername] = useState('');\n  const [showMoodTracker, setShowMoodTracker] = useState(false);\n  const handleCloseMoodTracker = () => setShowMoodTracker(false);\n  const handleOpenMoodTracker = () => setShowMoodTracker(true);\n\n  // ğŸ”½ Function 1: Load Saved Username (rehydrate)\n  useEffect(() => {\n    const saved = UsernameStore.get();\n    if (saved) setUsername(saved);\n  }, []);\n\n  // Log environment on startup\n  useEffect(() => {\n    console.log(`ğŸš€ Running in ${process.env.REACT_APP_ENV || 'unknown'} mode`);\n    console.log(`ğŸ›°ï¸ Backend: ${process.env.REACT_APP_BACKEND_URL || 'unset'}`);\n    console.log(`ğŸ—„ï¸ Supabase: ${process.env.REACT_APP_SUPABASE_URL || 'unset'}`);\n  }, []);\n\n  // ğŸ”½ Function 3: Show Summary Trigger\n  useEffect(() => {\n    const hasTriggeredSummary = localStorage.getItem('hasTriggeredSummary');\n    if (!hasTriggeredSummary && history.length >= 5) {\n      setShowSummary(true);\n      localStorage.setItem('hasTriggeredSummary', 'true');\n    }\n  }, [history]);\n\n  // ğŸ”½ Function 3a: Build Current Commit Tag \n  useEffect(() => {\n    fetch('/build-version.txt').then(res => res.text()).then(text => {\n      console.log(\"ğŸ› ï¸ App.js version:\", text);\n      // console.log(`ğŸ§± Frontend build version: ${text}`);\n    });\n  }, []);\n\n  // ğŸ”½ Function 4: Auth Setup (boot + subscribe once)\n  useEffect(() => {\n    let stop = () => {};\n    (async () => {\n      setSession(await getBootSession());\n      stop = subscribeAuth(setSession);\n    })();\n    return () => stop();\n  }, []);\n\n  // ğŸ”½ Function 5: Submit New Journal Entry (username/sessionâ€“safe)\n  const handleSubmit = async () => {\n    var _s;\n    console.warn(\"ğŸ§ª handleSubmit called!\");\n\n    // Always read a stable username\n    const u = (username || UsernameStore.get() || '').trim();\n\n    // Make sure we have a session\n    let s = session;\n    if (!s) {\n      s = await getBootSession();\n      if (s) setSession(s);\n    }\n\n    // Guard rails: must have session + entry + username\n    if (!((_s = s) !== null && _s !== void 0 && _s.user) || !entry.trim() || !u) return;\n    setProcessingMessage(`â³ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n    const debug_marker = Math.random().toString(36).substring(2, 8);\n    const userId = s.user.id;\n    try {\n      const res = await fetch(`${process.env.REACT_APP_BACKEND_URL}/journal-entry`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          entry_text: entry,\n          tone_mode: forcedTone,\n          username: u,\n          // <-- use stable value\n          user_id: userId,\n          debug_marker\n        })\n      });\n      const data = await res.json();\n      const responseText = data.response || 'No response received.';\n      console.log('âœ… Submitting journal for user:', u);\n    } catch (err) {\n      console.error('âŒ Submit failed:', err);\n    } finally {\n      setEntry('');\n      setParsedTags([]);\n      setSeverityLevel('');\n      setIsProcessing(false);\n      setTimeout(fetchHistory, 300);\n      setRefreshTrigger(prev => prev + 1);\n    }\n  };\n\n  // ğŸ”½ Function 5b: Generate Pattern Insight\n  const [processingMessage, setProcessingMessage] = useState(\"\");\n  const handlePatternInsight = async () => {\n    setProcessingMessage(`â³ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n    try {\n      var _userData$user;\n      const {\n        data: userData\n      } = await supabase.auth.getUser();\n      const userId = (_userData$user = userData.user) === null || _userData$user === void 0 ? void 0 : _userData$user.id;\n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/generate-pattern-insight`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_id: userId,\n          tone_mode: forcedTone // âœ… pass selected voice\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        console.log('âœ… Insight:', data.insight);\n        setRefreshTrigger(prev => prev + 1); // ğŸ” trigger timeline refresh\n      } else {\n        console.error('âŒ Insight error:', data.error);\n      }\n    } catch (err) {\n      console.error('âŒ Insight fetch failed:', err);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  // ğŸ”½ Function 6: Fetch Past Journals\n  const fetchHistory = async () => {\n    const user = session === null || session === void 0 ? void 0 : session.user;\n    if (!user) return;\n    const {\n      data,\n      error\n    } = await supabase.from('journals').select('id, entry_text, response_text, primary_theme, secondary_theme, tone_mode, timestamp, debug_marker').eq('user_id', user.id).order('timestamp', {\n      ascending: false\n    });\n    if (error) {\n      console.error(\"âŒ Error fetching history:\", error.message);\n      return;\n    }\n\n    // ğŸ”½ Function 6a: Filter Out No Respose, No debug markers \n\n    const showAll = true; // <== True all entries, False filtered \n    const filtered = showAll ? data || [] : (data || []).filter(entry => {\n      var _entry$response_text, _entry$debug_marker;\n      return ((_entry$response_text = entry.response_text) === null || _entry$response_text === void 0 ? void 0 : _entry$response_text.trim().toLowerCase()) !== 'no response received.' && ((_entry$debug_marker = entry.debug_marker) === null || _entry$debug_marker === void 0 ? void 0 : _entry$debug_marker.trim()) !== '';\n    });\n    // console.log(\"ğŸ“œ Filtered journal history:\", filtered);  // <== Enable if False \n    setHistory(filtered);\n  };\n  useEffect(() => {\n    if (session) fetchHistory();\n  }, [session]);\n\n  // ğŸ”½ UI State Routing\n  if (!session && !showLogin) {\n    return /*#__PURE__*/_jsxDEV(LandingPage, {\n      onStart: () => setShowLogin(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 12\n    }, this);\n  }\n  if (!session) {\n    return /*#__PURE__*/_jsxDEV(LoginPage, {\n      onAuthSuccess: (session, username) => {\n        setSession(session);\n        setUsername(username);\n        UsernameStore.set(username); // <--persist\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }, this);\n  }\n\n  // ğŸ”½ Function 7: Generate Handoff Summaries  \n\n  // ğŸ”½ Tone Display Utility\n  const displayTone = mode => {\n    const t = mode === null || mode === void 0 ? void 0 : mode.trim().toLowerCase();\n    return t === 'frank' ? 'ğŸ”´ Frank Friend' : 'ğŸŸ¢ Marcus Aurelius';\n  };\n  const getToneStyle = mode => {\n    const tone = mode === null || mode === void 0 ? void 0 : mode.trim().toLowerCase();\n    switch (tone) {\n      case 'frank':\n      case 'frank friend':\n        return {\n          backgroundColor: '#fff1f1',\n          borderColor: '#cc0000',\n          label: 'ğŸ”´ Tony'\n        };\n      case 'marcus':\n      case 'marcus aurelius':\n        return {\n          backgroundColor: '#f0fdf4',\n          borderColor: '#2e7d32',\n          label: 'ğŸŸ¢ Marcus Aurelius'\n        };\n      case 'therapist':\n        return {\n          backgroundColor: '#fef6ff',\n          borderColor: '#b755e5',\n          label: 'ğŸŸ£ Clara'\n        };\n      case 'movies':\n        return {\n          backgroundColor: '#fdfaf6',\n          borderColor: '#ff8c00',\n          label: 'ğŸ¬ Movie Metaphors Man'\n        };\n      case 'verena':\n        return {\n          backgroundColor: '#ffeaf0',\n          borderColor: '#ec407a',\n          label: 'ğŸŒ¸ Verena'\n        };\n      default:\n        return {\n          backgroundColor: '#eeeeee',\n          borderColor: '#999999',\n          label: 'â“ Unknown'\n        };\n    }\n  };\n\n  // Centralize tooltip copy in one place\n  const TOOLTIP_TEXT = {\n    pattern: \"Generates a unified insight based on your recent themes, topics, and emotional loops.\",\n    therapist: \"A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.\",\n    mood: \"Visualizes your emotional trends over time. Coming soon.\"\n  };\n\n  // ğŸ”½ UI Rendering\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [showWelcome && welcomeStep === 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        width: '100%',\n        height: '100%',\n        backgroundColor: 'rgba(255,255,255,0.96)',\n        zIndex: 1000,\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'column',\n        padding: '2rem',\n        textAlign: 'center',\n        fontFamily: 'sans-serif',\n        overflowY: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: '700px',\n          width: '90%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            marginBottom: '1rem',\n            fontSize: '1.6rem'\n          },\n          children: \"\\u2728 Choose Your Companion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            textAlign: 'left',\n            fontSize: '1rem',\n            marginBottom: '2rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83D\\uDCAA\\uD83C\\uDF77 Tony\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), \" \\u2013 A frank, no-bullshit friend who\\u2019s always honest and supportive, helping you cut through the crap and break free from the loops that keep you stuck.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83E\\uDDD8 Marcus Aurelius\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 15\n            }, this), \" \\u2013 Speaks like the Stoic philosopher himself\\u2014calm, sparse, and deeply rooted in principle. If inspired he may quote from his own journal, \", /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"Meditations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 178\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83E\\uDE7A Clara\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 15\n            }, this), \" \\u2013 A warm, grounded therapist who sees the pattern beneath the panic.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83C\\uDFAC Movie Metaphor Man\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this), \" \\u2013 Only thinks in movie metaphors\\u2014no matter what you say. Your problems are part of the hero's journey.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              marginBottom: '1.5rem'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\uD83C\\uDF38 Verena\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this), \" \\u2013 Verena is a clarity-driven career coach who helps you stop spinning your wheels and start building something real.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowWelcome(false),\n          style: {\n            padding: '0.8rem 1.5rem',\n            fontSize: '1rem',\n            borderRadius: '6px',\n            backgroundColor: '#374151',\n            color: '#fff',\n            border: 'none',\n            cursor: 'pointer'\n          },\n          children: \"Let\\u2019s begin \\u2192\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this), !showWelcome && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container background-option-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            style: {\n              marginBottom: '0.3rem',\n              fontSize: '1.8rem',\n              fontWeight: 600,\n              letterSpacing: '0.5px',\n              color: '#1a1a1a',\n              fontFamily: 'Georgia, serif',\n              textShadow: '0 1px 1px rgba(0,0,0,0.1)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mirror-emoji\",\n              role: \"img\",\n              \"aria-label\": \"mirror\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), ' ', \"Cognitive Mirror\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'inline-block',\n              padding: '0.2rem 0.6rem',\n              fontSize: '0.75rem',\n              color: '#555',\n              backgroundColor: '#f5f5f5',\n              border: '1px solid #ddd',\n              borderRadius: '6px',\n              fontStyle: 'italic'\n            },\n            children: \"\\uD83D\\uDEA7 Rough Beta: Responses can take up to a minute. Thanks for your patience.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.75rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            title: (session === null || session === void 0 ? void 0 : (_session$user = session.user) === null || _session$user === void 0 ? void 0 : _session$user.id) || '',\n            style: {\n              fontSize: '.85rem',\n              color: '#374151',\n              background: '#eef2ff',\n              border: '1px solid #c7d2fe',\n              padding: '4px 8px',\n              borderRadius: '6px',\n              lineHeight: 1.2,\n              whiteSpace: 'nowrap'\n            },\n            children: [\"Signed in as \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: username || 'â€”'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 26\n            }, this), session !== null && session !== void 0 && (_session$user2 = session.user) !== null && _session$user2 !== void 0 && _session$user2.id ? /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#6b7280',\n                marginLeft: 6\n              },\n              children: [\"(\", session.user.id.slice(0, 8), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 15\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: async () => {\n              await supabase.auth.signOut();\n              setSession(null);\n            },\n            style: {\n              padding: '6px 10px',\n              borderRadius: 6,\n              border: '1px solid #d1d5db',\n              background: '#fff',\n              cursor: 'pointer'\n            },\n            children: \"Log Out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reflection-input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          className: \"reflection-textarea\",\n          rows: \"3\",\n          value: entry,\n          onChange: e => setEntry(e.target.value),\n          onKeyDown: e => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              if (entry.trim() && !isProcessing) {\n                handleSubmit();\n              }\n            }\n          },\n          placeholder: placeholderPrompt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cm-toolbar\",\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            flexWrap: 'wrap',\n            gap: '8px 12px',\n            padding: '6px 10px',\n            background: '#f2f2f2',\n            border: '1px solid #e6e6e6',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cm-actions\",\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 8,\n              flexWrap: 'wrap',\n              position: 'relative'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: handleSubmit,\n              id: \"reflect-btn\",\n              \"aria-label\": \"Reflect\",\n              type: \"button\",\n              disabled: isProcessing || !entry.trim(),\n              children: \"\\uD83E\\uDDE0 Reflect\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: handlePatternInsight,\n              onMouseEnter: () => setTooltipVisible('pattern'),\n              onMouseLeave: () => setTooltipVisible(null),\n              children: \"\\uD83E\\uDDED See Pattern Insight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: () => setShowSummary(true),\n              onMouseEnter: () => setTooltipVisible('therapist'),\n              onMouseLeave: () => setTooltipVisible(null),\n              children: \"\\uD83E\\uDE7A Therapist Summary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cm-btn\",\n              onClick: handleOpenMoodTracker /* your existing handler */,\n              onMouseEnter: () => setTooltipVisible('mood'),\n              onMouseLeave: () => setTooltipVisible(null),\n              children: \"\\uD83D\\uDCCA Mood Tracker\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 15\n            }, this), tooltipVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                position: 'absolute',\n                top: '-2.4rem',\n                left: '50%',\n                transform: 'translateX(-50%)',\n                background: '#333',\n                color: '#fff',\n                padding: '0.4rem 0.6rem',\n                borderRadius: 6,\n                fontSize: '0.75rem',\n                whiteSpace: 'nowrap',\n                zIndex: 20,\n                pointerEvents: 'none'\n              },\n              children: [tooltipVisible === 'pattern' && 'Generates a unified insight based on your recent themes, topics, and emotional loops.', tooltipVisible === 'therapist' && 'A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.', tooltipVisible === 'mood' && 'Visualizes your emotional trends over time.']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 17\n            }, this), isListening && /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83C\\uDFA7 Listening\\u2026\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 31\n            }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"processing-message\",\n              children: [\"\\u23F3 \", toneName(forcedTone), \" is thinking\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"dots\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 556,\n                columnNumber: 55\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 555,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cm-voice\",\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px 10px',\n              flexWrap: 'wrap',\n              borderLeft: '1px solid #e6e6e6',\n              paddingLeft: 12\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                marginRight: '0.35rem'\n              },\n              children: \"\\uD83D\\uDDE3\\uFE0F Voice:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: forcedTone,\n              onChange: handleToneChange,\n              \"aria-label\": \"Select voice\",\n              style: {\n                minWidth: 120,\n                maxWidth: 160,\n                padding: '6px 8px'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"therapist\",\n                children: \"Clara\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"marcus\",\n                children: \"Marcus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 581,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"frank\",\n                children: \"Tony\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"movies\",\n                children: \"Movies\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"verena\",\n                children: \"Verena\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 574,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cm-tone-desc\",\n              \"aria-live\": \"polite\",\n              children: toneDescription\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 586,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          paddingBottom: '2rem',\n          WebkitOverflowScrolling: 'touch',\n          // Smooth scrolling on iOS\n          // Remove smooth scroll to prevent zoom interference\n          scrollBehavior: 'auto',\n          touchAction: 'pan-x pan-y pinch-zoom' // Allow pinch-zoom\n        },\n        children: /*#__PURE__*/_jsxDEV(JournalTimeline, {\n          userId: session === null || session === void 0 ? void 0 : (_session$user3 = session.user) === null || _session$user3 === void 0 ? void 0 : _session$user3.id,\n          refreshTrigger: refreshTrigger,\n          styleVariant: styleVariant\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 9\n      }, this), showSummary && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '1rem'\n        },\n        children: /*#__PURE__*/_jsxDEV(SummaryViewer, {\n          history: history,\n          onClose: () => setShowSummary(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 614,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 11\n      }, this), showMoodTracker && /*#__PURE__*/_jsxDEV(MoodModal, {\n        userId: session === null || session === void 0 ? void 0 : (_session$user4 = session.user) === null || _session$user4 === void 0 ? void 0 : _session$user4.id,\n        onClose: handleCloseMoodTracker\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 619,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s2(App, \"JczeZVD+MQuqgtuLh6NJEJNmwbo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","SummaryViewer","supabase","UsernameStore","getBootSession","subscribeAuth","LandingPage","LoginPage","JournalTimeline","MoodModal","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s2","_session$user","_session$user2","_session$user3","_session$user4","toneDescriptions","therapist","marcus","frank","movies","verena","forcedTone","setForcedTone","toneDescription","setToneDescription","handleToneChange","e","val","target","value","toneName","t","showLogin","setShowLogin","session","setSession","entry","setEntry","history","setHistory","tooltip","setTooltip","latestEntryId","setLatestEntryId","showSummary","setShowSummary","loadingSummary","setLoadingSummary","summary","setSummary","parsedTags","setParsedTags","severityLevel","setSeverityLevel","isProcessing","setIsProcessing","recognition","setRecognition","isListening","setIsListening","prompts","showGroupedView","setShowGroupedView","placeholderPrompt","setPlaceholderPrompt","Math","floor","random","length","refreshTrigger","setRefreshTrigger","transcriptBuffer","tooltipVisible","setTooltipVisible","styleVariant","setStyleVariant","showWelcome","setShowWelcome","welcomeStep","setWelcomeStep","username","setUsername","showMoodTracker","setShowMoodTracker","handleCloseMoodTracker","handleOpenMoodTracker","saved","get","console","log","process","env","REACT_APP_ENV","REACT_APP_BACKEND_URL","REACT_APP_SUPABASE_URL","hasTriggeredSummary","localStorage","getItem","setItem","fetch","then","res","text","stop","handleSubmit","_s","warn","u","trim","s","user","setProcessingMessage","debug_marker","toString","substring","userId","id","method","headers","body","JSON","stringify","entry_text","tone_mode","user_id","data","json","responseText","response","err","error","setTimeout","fetchHistory","prev","processingMessage","handlePatternInsight","_userData$user","userData","auth","getUser","ok","insight","from","select","eq","order","ascending","message","showAll","filtered","filter","_entry$response_text","_entry$debug_marker","response_text","toLowerCase","onStart","fileName","_jsxFileName","lineNumber","columnNumber","onAuthSuccess","set","displayTone","mode","getToneStyle","tone","backgroundColor","borderColor","label","TOOLTIP_TEXT","pattern","mood","children","style","position","top","left","width","height","zIndex","display","justifyContent","alignItems","flexDirection","padding","textAlign","fontFamily","overflowY","maxWidth","marginBottom","fontSize","onClick","borderRadius","color","border","cursor","className","fontWeight","letterSpacing","textShadow","role","fontStyle","gap","title","background","lineHeight","whiteSpace","marginLeft","slice","signOut","rows","onChange","onKeyDown","key","shiftKey","preventDefault","placeholder","flexWrap","type","disabled","onMouseEnter","onMouseLeave","transform","pointerEvents","borderLeft","paddingLeft","marginRight","minWidth","flex","paddingBottom","WebkitOverflowScrolling","scrollBehavior","touchAction","marginTop","onClose","_c","$RefreshReg$"],"sources":["/Users/mac/Projects/cognitive-mirror-frontend-dev/src/App.js"],"sourcesContent":["// ğŸ”¼ Imports and Setup      \nimport React, { useEffect, useState } from 'react'; \nimport SummaryViewer from './SummaryViewer'; \nimport { supabase, UsernameStore, getBootSession, subscribeAuth } from './supabaseClient';\nimport './App.css';\n// import DemoSofia from './pages/DemoSofia';\nimport LandingPage from './LandingPage';\nimport LoginPage from './LoginPage';\nimport JournalTimeline from './components/JournalTimeline';\nimport MoodModal from './components/MoodModal'; \n\nconst App = () => {\n\n  // --- Tone descriptions map ---\n  const toneDescriptions = {\n    therapist: \"ğŸ©º Clara â€“ A warm, grounded therapist who sees the pattern beneath the panic.\",\n    marcus: \"ğŸ§˜ Marcus â€“ Speaks like the Stoic philosopher himself. Will quote Meditations.\",\n    frank: \"ğŸ’ªğŸ· Tony â€“ A frank, no-bullshit friend who tells you what you need to hear.\",\n    movies: \"ğŸ¬ Movies â€“ A movie buff who only speaks through movie metaphors.\",\n    verena: \"ğŸŒ¸ Verena â€“ A clarity-driven life coach unphased by self-pity.\"\n  };\n\n  // Default to Clara\n  const [forcedTone, setForcedTone] = useState(\"therapist\");\n  // Keep a visible description bound to the current selection\n  const [toneDescription, setToneDescription] = useState(toneDescriptions[\"therapist\"]);\n\n  const handleToneChange = (e) => {\n    const val = e.target.value;\n    setForcedTone(val);\n    setToneDescription(toneDescriptions[val] || \"\");\n  };\n\n  const toneName = (t) =>\n  ({ therapist: 'Clara', marcus: 'Marcus', frank: 'Tony', movies: 'Movies', verena: 'Verena' }[t] || 'Mirror');\n\n  // ğŸ”½ Existing states (no change to their order beyond moving forcedTone here)\n  const [showLogin, setShowLogin] = useState(false);\n  const [session, setSession] = useState(null);\n  const [entry, setEntry] = useState('');\n  const [history, setHistory] = useState([]);\n  const [tooltip, setTooltip] = useState(\"ğŸ©º Clara â€“ A warm, grounded therapist who sees the pattern beneath the panic.\");\n  const [latestEntryId, setLatestEntryId] = useState(null);\n  const [showSummary, setShowSummary] = useState(false);\n  const [loadingSummary, setLoadingSummary] = useState(false);\n  const [summary, setSummary] = useState('');\n  const [parsedTags, setParsedTags] = useState([]);\n  const [severityLevel, setSeverityLevel] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [recognition, setRecognition] = useState(null);\n  const [isListening, setIsListening] = useState(false);\n  const prompts = [\"Whatâ€™s shaking sugar?\"];\n  const [showGroupedView, setShowGroupedView] = useState(false);\n  const [placeholderPrompt, setPlaceholderPrompt] = useState(() =>\n    prompts[Math.floor(Math.random() * prompts.length)] \n  );\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  let transcriptBuffer = '';\n  const [tooltipVisible, setTooltipVisible] = useState(null); // 'pattern' | 'therapist' | 'mood' | null\n  const [styleVariant, setStyleVariant] = useState(\"D\")\n  const [showWelcome, setShowWelcome] = useState(false);\n  const [welcomeStep, setWelcomeStep] =useState(1);\n  const [username, setUsername] = useState('');\n  const [showMoodTracker, setShowMoodTracker] = useState(false);\n  const handleCloseMoodTracker = () => setShowMoodTracker(false);\n  const handleOpenMoodTracker = () => setShowMoodTracker(true);\n\n  // ğŸ”½ Function 1: Load Saved Username (rehydrate)\n  useEffect(() => {\n    const saved = UsernameStore.get();\n    if (saved) setUsername(saved);\n  }, []);\n\n    // Log environment on startup\n  useEffect(() => {\n    console.log(`ğŸš€ Running in ${process.env.REACT_APP_ENV || 'unknown'} mode`);\n    console.log(`ğŸ›°ï¸ Backend: ${process.env.REACT_APP_BACKEND_URL || 'unset'}`);\n    console.log(`ğŸ—„ï¸ Supabase: ${process.env.REACT_APP_SUPABASE_URL || 'unset'}`);\n  }, []);\n  \n  // ğŸ”½ Function 3: Show Summary Trigger\n  useEffect(() => {\n    const hasTriggeredSummary = localStorage.getItem('hasTriggeredSummary');\n    if (!hasTriggeredSummary && history.length >= 5) {\n      setShowSummary(true);\n      localStorage.setItem('hasTriggeredSummary', 'true');\n    }\n  }, [history]);\n\n   // ğŸ”½ Function 3a: Build Current Commit Tag \n  useEffect(() => {\n    fetch('/build-version.txt')\n      .then(res => res.text())\n      .then(text => {\n         console.log(\"ğŸ› ï¸ App.js version:\", text);\n         // console.log(`ğŸ§± Frontend build version: ${text}`);\n      });\n  }, []);\n\n  // ğŸ”½ Function 4: Auth Setup (boot + subscribe once)\n    useEffect(() => {\n      let stop = () => {};\n      (async () => {\n        setSession(await getBootSession());\n        stop = subscribeAuth(setSession);\n      })();\n      return () => stop();\n    }, []);\n\n // ğŸ”½ Function 5: Submit New Journal Entry (username/sessionâ€“safe)\n  const handleSubmit = async () => {\n    console.warn(\"ğŸ§ª handleSubmit called!\");\n\n    // Always read a stable username\n    const u = (username || UsernameStore.get() || '').trim();\n\n    // Make sure we have a session\n    let s = session;\n    if (!s) {\n      s = await getBootSession();\n      if (s) setSession(s);\n    }\n\n    // Guard rails: must have session + entry + username\n    if (!s?.user || !entry.trim() || !u) return;\n\n    setProcessingMessage(`â³ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n\n    const debug_marker = Math.random().toString(36).substring(2, 8);\n    const userId = s.user.id;\n\n    try {\n      const res = await fetch(`${process.env.REACT_APP_BACKEND_URL}/journal-entry`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          entry_text: entry,\n          tone_mode: forcedTone,\n          username: u,            // <-- use stable value\n          user_id: userId,\n          debug_marker,\n        }),\n      });\n\n      const data = await res.json();\n      const responseText = data.response || 'No response received.';\n      console.log('âœ… Submitting journal for user:', u);\n    } catch (err) {\n      console.error('âŒ Submit failed:', err);\n    } finally {\n      setEntry('');\n      setParsedTags([]);\n      setSeverityLevel('');\n      setIsProcessing(false);\n      setTimeout(fetchHistory, 300);\n      setRefreshTrigger(prev => prev + 1);\n    }\n  };\n\n  // ğŸ”½ Function 5b: Generate Pattern Insight\n  const [processingMessage, setProcessingMessage] = useState(\"\");\n  \n  const handlePatternInsight = async () => {\n    setProcessingMessage(`â³ ${toneName(forcedTone)} is thinking...`);\n    setIsProcessing(true);\n  \n    try {\n      const { data: userData } = await supabase.auth.getUser();\n      const userId = userData.user?.id;\n      \n      const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/generate-pattern-insight`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          user_id: userId,\n          tone_mode: forcedTone // âœ… pass selected voice\n        })\n      });\n  \n      const data = await response.json();\n  \n      if (response.ok) {\n        console.log('âœ… Insight:', data.insight);\n        setRefreshTrigger(prev => prev + 1); // ğŸ” trigger timeline refresh\n      } else {\n        console.error('âŒ Insight error:', data.error);\n      }\n    } catch (err) {\n      console.error('âŒ Insight fetch failed:', err);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n  \n   // ğŸ”½ Function 6: Fetch Past Journals\n  const fetchHistory = async () => {\n    const user = session?.user;\n    if (!user) return;\n    const { data, error } = await supabase\n      .from('journals')\n      .select('id, entry_text, response_text, primary_theme, secondary_theme, tone_mode, timestamp, debug_marker')\n      .eq('user_id', user.id)\n      .order('timestamp', { ascending: false });\n      \n    if (error) {\n    console.error(\"âŒ Error fetching history:\", error.message);\n    return;\n  }\n\n  // ğŸ”½ Function 6a: Filter Out No Respose, No debug markers \n\n  const showAll = true; // <== True all entries, False filtered \n  const filtered = showAll\n    ? (data || [])\n    : (data || []).filter(entry =>\n    entry.response_text?.trim().toLowerCase() !== 'no response received.' &&\n    entry.debug_marker?.trim() !== ''\n  );\n  // console.log(\"ğŸ“œ Filtered journal history:\", filtered);  // <== Enable if False \n  setHistory(filtered);\n};\n\n  useEffect(() => {\n    if (session) fetchHistory();\n  }, [session]);\n\n  // ğŸ”½ UI State Routing\n  if (!session && !showLogin) {\n    return <LandingPage onStart={() => setShowLogin(true)} />;\n  }\n\n  if (!session) {\n    return (\n      <LoginPage\n        onAuthSuccess={(session, username) => {\n          setSession(session);\n          setUsername(username);\n          UsernameStore.set(username); // <--persist\n        }}\n      />\n    );\n  }\n\n// ğŸ”½ Function 7: Generate Handoff Summaries  \n\n  // ğŸ”½ Tone Display Utility\n  const displayTone = (mode) => {\n    const t = mode?.trim().toLowerCase();\n    return t === 'frank' ? 'ğŸ”´ Frank Friend' : 'ğŸŸ¢ Marcus Aurelius';\n  };\n\n  const getToneStyle = (mode) => {\n    const tone = mode?.trim().toLowerCase();\n    switch (tone) {\n      case 'frank':\n      case 'frank friend':\n        return {\n          backgroundColor: '#fff1f1',\n          borderColor: '#cc0000',\n          label: 'ğŸ”´ Tony',\n        };\n      case 'marcus':\n      case 'marcus aurelius':\n        return {\n          backgroundColor: '#f0fdf4',\n          borderColor: '#2e7d32',\n          label: 'ğŸŸ¢ Marcus Aurelius',\n        };\n      case 'therapist':\n        return {\n          backgroundColor: '#fef6ff',\n          borderColor: '#b755e5',\n          label: 'ğŸŸ£ Clara',\n        };\n      case 'movies':\n        return {\n          backgroundColor: '#fdfaf6',\n          borderColor: '#ff8c00',\n          label: 'ğŸ¬ Movie Metaphors Man',\n        };\n      case 'verena':\n          return {\n            backgroundColor: '#ffeaf0',\n            borderColor: '#ec407a',\n            label: 'ğŸŒ¸ Verena',\n        };  \n      default:\n        return {\n          backgroundColor: '#eeeeee',\n          borderColor: '#999999',\n          label: 'â“ Unknown',\n        };\n    }\n  };\n\n    // Centralize tooltip copy in one place\n    const TOOLTIP_TEXT = {\n      pattern: \"Generates a unified insight based on your recent themes, topics, and emotional loops.\",\n      therapist: \"A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.\",\n      mood: \"Visualizes your emotional trends over time. Coming soon.\"\n    };\n\n// ğŸ”½ UI Rendering\nreturn (\n  <>\n    {/* Step 1: Voice Introduction + Begin */}\n    {showWelcome && welcomeStep === 1 && (\n      <div\n        style={{\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          backgroundColor: 'rgba(255,255,255,0.96)',\n          zIndex: 1000,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          flexDirection: 'column',\n          padding: '2rem',\n          textAlign: 'center',\n          fontFamily: 'sans-serif',\n          overflowY: 'auto'\n        }}\n      >\n        <div style={{ maxWidth: '700px', width: '90%' }}>\n          <h2 style={{ marginBottom: '1rem', fontSize: '1.6rem' }}>âœ¨ Choose Your Companion</h2>\n          <ul style={{ textAlign: 'left', fontSize: '1rem', marginBottom: '2rem' }}>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>ğŸ’ªğŸ· Tony</b> â€“ A frank, no-bullshit friend whoâ€™s always honest and supportive, helping you cut through the crap and break free from the loops that keep you stuck.\n            </li>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>ğŸ§˜ Marcus Aurelius</b> â€“ Speaks like the Stoic philosopher himselfâ€”calm, sparse, and deeply rooted in principle. If inspired he may quote from his own journal, <i>Meditations</i>.\n            </li>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>ğŸ©º Clara</b> â€“ A warm, grounded therapist who sees the pattern beneath the panic.\n            </li>\n            <li style={{ marginBottom: '1rem' }}>\n              <b>ğŸ¬ Movie Metaphor Man</b> â€“ Only thinks in movie metaphorsâ€”no matter what you say. Your problems are part of the hero's journey.\n            </li>\n            <li style={{ marginBottom: '1.5rem' }}>\n              <b>ğŸŒ¸ Verena</b> â€“ Verena is a clarity-driven career coach who helps you stop spinning your wheels and start building something real.\n            </li>\n          </ul>\n\n          <button\n            onClick={() => setShowWelcome(false)}\n            style={{\n              padding: '0.8rem 1.5rem',\n              fontSize: '1rem',\n              borderRadius: '6px',\n              backgroundColor: '#374151',\n              color: '#fff',\n              border: 'none',\n              cursor: 'pointer'\n            }}\n          >\n            Letâ€™s begin â†’\n          </button>\n        </div>\n      </div>\n    )}\n\n    {/* MAIN APP INTERFACE â€” Only render when welcome is dismissed */}\n    {!showWelcome && (\n      <div className=\"chat-container background-option-1\">\n        {/* Header with Logout */}\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n          <div>\n            <h1\n              style={{\n                marginBottom: '0.3rem',\n                fontSize: '1.8rem',\n                fontWeight: 600,\n                letterSpacing: '0.5px',\n                color: '#1a1a1a',\n                fontFamily: 'Georgia, serif',\n                textShadow: '0 1px 1px rgba(0,0,0,0.1)'\n              }}\n            >\n              <span className=\"mirror-emoji\" role=\"img\" aria-label=\"mirror\">\n              </span>{' '}\n              Cognitive Mirror\n            </h1>\n\n            <div\n              style={{\n                display: 'inline-block',\n                padding: '0.2rem 0.6rem',\n                fontSize: '0.75rem',\n                color: '#555',\n                backgroundColor: '#f5f5f5',\n                border: '1px solid #ddd',\n                borderRadius: '6px',\n                fontStyle: 'italic'\n              }}\n            >\n               ğŸš§ Rough Beta: Responses can take up to a minute. Thanks for your patience.\n            </div>\n          </div>\n  \n        {/* Username and Logout Button Placement Top Right */}\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\n          <div\n            title={session?.user?.id || ''}\n            style={{\n              fontSize: '.85rem',\n              color: '#374151',\n              background: '#eef2ff',\n              border: '1px solid #c7d2fe',\n              padding: '4px 8px',\n              borderRadius: '6px',\n              lineHeight: 1.2,\n              whiteSpace: 'nowrap'\n            }}\n          >\n            Signed in as <strong>{username || 'â€”'}</strong>\n            {session?.user?.id ? (\n              <span style={{ color: '#6b7280', marginLeft: 6 }}>\n                ({(session.user.id).slice(0, 8)})\n              </span>\n            ) : null}\n          </div>\n\n          <button\n            onClick={async () => {\n              await supabase.auth.signOut();\n              setSession(null);\n            }}\n            style={{\n              padding: '6px 10px',\n              borderRadius: 6,\n              border: '1px solid #d1d5db',\n              background: '#fff',\n              cursor: 'pointer'\n            }}\n          >\n            Log Out\n          </button>\n        </div>\n        </div>\n\n        {/* Sticky Input Bar (fixed) */}\n        <div\n          className=\"reflection-input-container\"\n        >\n          <textarea\n          className=\"reflection-textarea\"\n          rows=\"3\"\n          value={entry}\n          onChange={(e) => setEntry(e.target.value)}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              if (entry.trim() && !isProcessing) {\n                handleSubmit();\n              }\n            }\n          }}\n          placeholder={placeholderPrompt}\n        />\n          {/* Toolbar row: all action buttons on one line */}\n          <div\n            className=\"cm-toolbar\"\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              flexWrap: 'wrap',\n              gap: '8px 12px',\n              padding: '6px 10px',\n              background: '#f2f2f2',\n              border: '1px solid #e6e6e6',\n              borderRadius: '6px'\n            }}\n          >\n            {/* Action buttons (one row) */}\n            <div\n              className=\"cm-actions\"\n              style={{ display: 'flex', alignItems: 'center', gap: 8, flexWrap: 'wrap', position: 'relative' }}\n            >\n              {/* <button className=\"cm-btn\" onClick={startListening} disabled={isListening}>\n                ğŸ™ï¸ Start\n              </button>\n              <button className=\"cm-btn\" onClick={stopListening} disabled={!isListening}>\n                ğŸ›‘ Stop\n          </button> */}\n          \n              <button \n                  className=\"cm-btn\" \n                  onClick={handleSubmit}\n                  id=\"reflect-btn\"\n                  aria-label=\"Reflect\"\n                  type=\"button\" \n                  disabled={isProcessing || !entry.trim()}>\n                ğŸ§  Reflect\n              </button>\n\n              <button\n                className=\"cm-btn\"\n                onClick={handlePatternInsight}\n                onMouseEnter={() => setTooltipVisible('pattern')}\n                onMouseLeave={() => setTooltipVisible(null)}\n              >\n                ğŸ§­ See Pattern Insight\n              </button>\n\n              <button\n                className=\"cm-btn\"\n                onClick={() => setShowSummary(true)}\n                onMouseEnter={() => setTooltipVisible('therapist')}\n                onMouseLeave={() => setTooltipVisible(null)}\n              >\n                ğŸ©º Therapist Summary\n              </button>\n\n              <button\n                className=\"cm-btn\"\n                onClick={handleOpenMoodTracker /* your existing handler */}\n                onMouseEnter={() => setTooltipVisible('mood')}\n                onMouseLeave={() => setTooltipVisible(null)}\n              >\n                ğŸ“Š Mood Tracker\n              </button>\n\n              {/* Shared tooltip renderer for the three buttons */}\n              {tooltipVisible && (\n                <div\n                  style={{\n                    position: 'absolute',\n                    top: '-2.4rem',\n                    left: '50%',\n                    transform: 'translateX(-50%)',\n                    background: '#333',\n                    color: '#fff',\n                    padding: '0.4rem 0.6rem',\n                    borderRadius: 6,\n                    fontSize: '0.75rem',\n                    whiteSpace: 'nowrap',\n                    zIndex: 20,\n                    pointerEvents: 'none'\n                  }}\n                >\n                  {tooltipVisible === 'pattern' &&\n                    'Generates a unified insight based on your recent themes, topics, and emotional loops.'}\n                  {tooltipVisible === 'therapist' &&\n                    'A handoff-style recap of emotional themes, loops, and potential focus areas for therapy.'}\n                  {tooltipVisible === 'mood' && 'Visualizes your emotional trends over time.'}\n                </div>\n              )}\n\n              {isListening && <span>ğŸ§ Listeningâ€¦</span>}\n              {isProcessing && (\n                <div className=\"processing-message\">\n                  â³ {toneName(forcedTone)} is thinking<span className=\"dots\"></span>\n                </div>\n              )}\n            </div>\n\n            {/* Voice cluster with subtle separation and a narrower select */}\n            <div\n              className=\"cm-voice\"\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px 10px',\n                flexWrap: 'wrap',\n                borderLeft: '1px solid #e6e6e6',\n                paddingLeft: 12\n              }}\n            >\n              <label style={{ marginRight: '0.35rem' }}>ğŸ—£ï¸ Voice:</label>\n              <select\n                value={forcedTone}\n                onChange={handleToneChange}\n                aria-label=\"Select voice\"\n                style={{ minWidth: 120, maxWidth: 160, padding: '6px 8px' }}\n              >\n                <option value=\"therapist\">Clara</option>\n                <option value=\"marcus\">Marcus</option>\n                <option value=\"frank\">Tony</option>\n                <option value=\"movies\">Movies</option>\n                <option value=\"verena\">Verena</option>\n              </select>\n              <div\n                className=\"cm-tone-desc\"\n                aria-live=\"polite\"\n              >\n                {toneDescription}\n              </div>\n            </div>\n          </div>\n          {/* END toolbar */}\n        </div>\n        {/* END fixed input container */}\n\n        {/* Timeline (outside the fixed container) */}\n        <div style={{ \n          flex: 1, \n          overflowY: 'auto', \n          paddingBottom: '2rem',\n          WebkitOverflowScrolling: 'touch', // Smooth scrolling on iOS\n          // Remove smooth scroll to prevent zoom interference\n          scrollBehavior: 'auto',\n          touchAction: 'pan-x pan-y pinch-zoom' // Allow pinch-zoom\n        }}>\n          <JournalTimeline userId={session?.user?.id} refreshTrigger={refreshTrigger} styleVariant={styleVariant} />\n        </div>\n\n        {/* Summary Viewer */}\n        {showSummary && (\n          <div style={{ marginTop: '1rem' }}>\n            <SummaryViewer history={history} onClose={() => setShowSummary(false)} />\n          </div>\n        )}\n        {/* Mood Tracker Model */}\n        {showMoodTracker && (\n          <MoodModal\n            userId={session?.user?.id}\n            onClose={handleCloseMoodTracker}\n          />\n        )}\n      </div>\n    )}\n  </>\n);\n}\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}