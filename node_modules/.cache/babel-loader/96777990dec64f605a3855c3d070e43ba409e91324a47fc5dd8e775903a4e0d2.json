{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Projects/cognitive-mirror-frontend-dev/src/components/JournalTimeline.js\",\n  _s = $RefreshSig$();\n// Step 1: Import dependencies at the top of JournalTimeline.js \nimport React, { useEffect, useState, useMemo, useRef } from 'react';\nimport { supabase } from '../supabaseClient';\nimport dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/timezone';\nimport timezone from 'dayjs/plugin/timezone';\ndayjs.extend(utc);\ndayjs.extend(timezone);\nimport groupBy from 'lodash/groupBy';\nimport sortBy from 'lodash/sortBy';\nimport uniq from 'lodash/uniq';\nimport Card from './Card';\nimport { Button } from './Button';\nimport ChatBubble from './ChatBubble';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function JournalTimeline({\n  userId,\n  refreshTrigger,\n  styleVariant\n}) {\n  _s();\n  var _journalEntries;\n  const [journalEntries, setJournalEntries] = useState([]);\n  // const [topics, setTopics] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [collapsedDays, setCollapsedDays] = useState({});\n  const [allCollapsed, setAllCollapsed] = useState(false);\n  // const [selectedTopic, setSelectedTopic] = useState('all');\n  const [selectedTheme, setSelectedTheme] = useState(null);\n  const [availableThemes, setAvailableThemes] = useState([]);\n  const [collaspedMonths, setCollapsedMonths] = useState({});\n  const bottomRef = useRef(null);\n  const timelineRef = useRef(null);\n\n  // âœ… Canonical theme list for dropdown\n  const canonicalThemes = ['Meaning / Existential Anxiety', 'Identity / Role Confusion', 'Purpose / Direction', 'Control / Safety', 'Attachment / Relationships', 'Autonomy / Power', 'Vulnerability / Trust', 'Self-worth / Shame', 'Motivation / Change', 'Grief / Loss'];\n  const [themeOptions, setThemeOptions] = useState([]);\n  useEffect(() => {\n    setThemeOptions(canonicalThemes);\n  }, []);\n\n  // Smart Insight Card \n  const [showSmartInsight, setShowSmartInsight] = useState(true);\n  const [insightTheme, setInsightTheme] = useState('');\n\n  // ðŸ§  Compute monthly mention count for selected theme\n  const monthlyMentions = insightTheme ? journalEntries.filter(entry => {\n    const isMatch = entry.primary_theme === insightTheme || entry.secondary_theme === insightTheme;\n    const inThisMonth = dayjs(entry.timestamp).isSame(dayjs(), 'month');\n    return isMatch && inThisMonth;\n  }).length : 0;\n  const [themeInsight, setThemeInsight] = useState(null);\n  useEffect(() => {\n    const fetchInsight = async () => {\n      if (!insightTheme || !userId) {\n        setThemeInsight(null);\n        return;\n      }\n      try {\n        const response = await fetch(`${process.env.REACT_APP_BACKEND_URL}/mention-count?user_id=${userId}&theme=${encodeURIComponent(insightTheme)}`);\n        const data = await response.json();\n        if (response.ok) {\n          setThemeInsight(data);\n        } else {\n          console.error('âŒ Error fetching theme insight:', data.error);\n          setThemeInsight(null);\n        }\n      } catch (err) {\n        console.error('âŒ Fetch failed:', err);\n        setThemeInsight(null);\n      }\n    };\n    fetchInsight();\n  }, [insightTheme, userId]);\n  useEffect(() => {\n    const fetchJournals = async () => {\n      setLoading(true);\n      const {\n        data,\n        error\n      } = await supabase.from('journals').select('*') // âœ… Include all fields for flexibility\n      .eq('user_id', userId).order('timestamp', {\n        ascending: false\n      });\n      if (error) {\n        console.error('âŒ Error fetching journals:', error.message);\n        setLoading(false);\n        return;\n      }\n      setJournalEntries(data || []);\n      console.log('âœ… journalEntries populated:', data); // Add this\n      setLoading(false);\n    };\n    fetchJournals();\n  }, [userId, refreshTrigger]);\n  useEffect(() => {\n    if (bottomRef.current) {\n      // Debounce scroll to prevent competing scroll behaviors on mobile\n      const timeoutId = setTimeout(() => {\n        bottomRef.current.scrollIntoView({\n          behavior: 'smooth'\n        });\n      }, 100);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [journalEntries]);\n\n  // âœ… FILTER THEMES: Step 1: Filter entries by selected theme before grouping\n  const filteredEntries = selectedTheme ? journalEntries.filter(entry => {\n    var _entry$primary_theme, _entry$secondary_them;\n    return ((_entry$primary_theme = entry.primary_theme) === null || _entry$primary_theme === void 0 ? void 0 : _entry$primary_theme.toLowerCase()) === selectedTheme.toLowerCase() || ((_entry$secondary_them = entry.secondary_theme) === null || _entry$secondary_them === void 0 ? void 0 : _entry$secondary_them.toLowerCase()) === selectedTheme.toLowerCase();\n  }) : journalEntries;\n\n  // âœ… Then group filtered entries by month\n  const groupedByMonth = groupBy(filteredEntries, entry => dayjs(entry.timestamp).format('YYYY-MM'));\n\n  //Visual Feedback for Empty Results\n  {\n    filteredEntries.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '1rem',\n        fontStyle: 'italic',\n        color: '#666'\n      },\n      children: \"No journal entries found for this topic.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 5\n    }, this);\n  }\n  const timeline = Object.entries(groupedByMonth).map(([month, monthEntries]) => {\n    const groupedByDay = groupBy(monthEntries, entry => dayjs(entry.timestamp).format('YYYY-MM-DD'));\n    return {\n      month,\n      days: Object.entries(groupedByDay).map(([day, entries]) => ({\n        day,\n        entries: entries.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp)) // ðŸ“ˆ Old-to-new per day\n      }))\n    };\n  });\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading journal entries...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 12\n    }, this);\n  }\n  if (!journalEntries.length) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"No entries found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 12\n    }, this);\n  }\n  const themeSet = new Set();\n  const latestEntryId = (_journalEntries = journalEntries[journalEntries.length - 1]) === null || _journalEntries === void 0 ? void 0 : _journalEntries.id;\n  journalEntries.forEach(entry => {\n    if (entry.primary_theme) themeSet.add(entry.primary_theme);\n    if (entry.secondary_theme && entry.secondary_theme !== 'NONE') {\n      themeSet.add(entry.secondary_theme);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: timelineRef,\n    style: {\n      padding: '1rem',\n      paddingBottom: '12rem',\n      // HOW TO INCREASE SPACE BETWEEN TOOLBAR AND TIMELINE\n      overflowY: 'auto',\n      maxHeight: 'calc(100svh - 12rem)',\n      // Adjust depending on header/footer height\n      WebkitOverflowScrolling: 'touch',\n      // Smooth scrolling on iOS\n      scrollBehavior: 'smooth',\n      // Smooth scrolling behavior\n      willChange: 'scroll-position' // Optimize for scroll performance\n    },\n    children: [Object.entries(journalEntries.reduce((acc, entry) => {\n      const dateKey = dayjs(entry.timestamp).format('YYYY-MM-DD');\n      if (!acc[dateKey]) acc[dateKey] = [];\n      acc[dateKey].push(entry);\n      return acc;\n    }, {})).sort((a, b) => new Date(a[0]) - new Date(b[0])) // ðŸªƒ Recent date first\n    .map(([dateKey, entries]) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          fontSize: '1rem',\n          fontWeight: 'bold',\n          marginBottom: '0.5rem',\n          color: '#444'\n        },\n        children: dayjs(dateKey).format('MMMM D, YYYY')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }, this), entries.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp)).map(entry => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '1rem'\n        },\n        children: [entry.entry_text && /*#__PURE__*/_jsxDEV(ChatBubble, {\n          entry: {\n            entry_text: entry.entry_text,\n            tone_mode: 'user',\n            entry_type: 'reflection'\n          },\n          styleVariant: styleVariant,\n          isMostRecent: entry.id === latestEntryId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 19\n        }, this), entry.response_text && /*#__PURE__*/_jsxDEV(ChatBubble, {\n          entry: entry,\n          styleVariant: styleVariant,\n          isMostRecent: entry.id === latestEntryId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 19\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: '2.5rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 17\n        }, this)]\n      }, entry.id || entry.timestamp, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 15\n      }, this))]\n    }, dateKey, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: bottomRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 3\n  }, this);\n}\n_s(JournalTimeline, \"2VY9Q3VOO3bbnxEGB5x4ERw1R1Q=\");\n_c = JournalTimeline;\nvar _c;\n$RefreshReg$(_c, \"JournalTimeline\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useRef","supabase","dayjs","utc","timezone","extend","groupBy","sortBy","uniq","Card","Button","ChatBubble","jsxDEV","_jsxDEV","JournalTimeline","userId","refreshTrigger","styleVariant","_s","_journalEntries","journalEntries","setJournalEntries","loading","setLoading","collapsedDays","setCollapsedDays","allCollapsed","setAllCollapsed","selectedTheme","setSelectedTheme","availableThemes","setAvailableThemes","collaspedMonths","setCollapsedMonths","bottomRef","timelineRef","canonicalThemes","themeOptions","setThemeOptions","showSmartInsight","setShowSmartInsight","insightTheme","setInsightTheme","monthlyMentions","filter","entry","isMatch","primary_theme","secondary_theme","inThisMonth","timestamp","isSame","length","themeInsight","setThemeInsight","fetchInsight","response","fetch","process","env","REACT_APP_BACKEND_URL","encodeURIComponent","data","json","ok","console","error","err","fetchJournals","from","select","eq","order","ascending","message","log","current","timeoutId","setTimeout","scrollIntoView","behavior","clearTimeout","filteredEntries","_entry$primary_theme","_entry$secondary_them","toLowerCase","groupedByMonth","format","style","marginTop","fontStyle","color","children","fileName","_jsxFileName","lineNumber","columnNumber","timeline","Object","entries","map","month","monthEntries","groupedByDay","days","day","sort","a","b","Date","themeSet","Set","latestEntryId","id","forEach","add","ref","padding","paddingBottom","overflowY","maxHeight","WebkitOverflowScrolling","scrollBehavior","willChange","reduce","acc","dateKey","push","marginBottom","fontSize","fontWeight","entry_text","tone_mode","entry_type","isMostRecent","response_text","height","_c","$RefreshReg$"],"sources":["/Users/mac/Projects/cognitive-mirror-frontend-dev/src/components/JournalTimeline.js"],"sourcesContent":["// Step 1: Import dependencies at the top of JournalTimeline.js \nimport React, { useEffect, useState, useMemo, useRef } from 'react';\nimport { supabase } from '../supabaseClient';\nimport dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/timezone';\nimport timezone from 'dayjs/plugin/timezone';\n \n\n\ndayjs.extend(utc);\ndayjs.extend(timezone);\n\nimport groupBy from 'lodash/groupBy';\nimport sortBy from 'lodash/sortBy';\nimport uniq from 'lodash/uniq';\nimport Card from './Card';\nimport { Button } from './Button';\nimport ChatBubble from './ChatBubble';\n\nexport default function JournalTimeline({userId, refreshTrigger, styleVariant }) {\n  const [journalEntries, setJournalEntries] = useState([]);\n  // const [topics, setTopics] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [collapsedDays, setCollapsedDays] = useState({});\n  const [allCollapsed, setAllCollapsed] = useState(false);\n  // const [selectedTopic, setSelectedTopic] = useState('all');\n  const [selectedTheme, setSelectedTheme] = useState(null);\n  const [availableThemes, setAvailableThemes] = useState([]);\n  const [collaspedMonths, setCollapsedMonths] = useState({});\n  const bottomRef = useRef(null);\n  const timelineRef = useRef(null);\n\n\n\n// âœ… Canonical theme list for dropdown\nconst canonicalThemes = [\n  'Meaning / Existential Anxiety',\n  'Identity / Role Confusion',\n  'Purpose / Direction',\n  'Control / Safety',\n  'Attachment / Relationships',\n  'Autonomy / Power',\n  'Vulnerability / Trust',\n  'Self-worth / Shame',\n  'Motivation / Change',\n  'Grief / Loss'\n];\n\nconst [themeOptions, setThemeOptions] = useState([]);\nuseEffect(() => {\nsetThemeOptions(canonicalThemes);\n}, []);\n\n// Smart Insight Card \nconst [showSmartInsight, setShowSmartInsight] = useState(true);\nconst [insightTheme, setInsightTheme] = useState('');\n\n// ðŸ§  Compute monthly mention count for selected theme\nconst monthlyMentions = insightTheme\n  ? journalEntries.filter(entry => {\n      const isMatch =\n        entry.primary_theme === insightTheme ||\n        entry.secondary_theme === insightTheme;\n      const inThisMonth =\n        dayjs(entry.timestamp).isSame(dayjs(), 'month');\n      return isMatch && inThisMonth;\n    }).length\n  : 0;\n\nconst [themeInsight, setThemeInsight] = useState(null);\n\nuseEffect(() => {\n  const fetchInsight = async () => {\n    if (!insightTheme || !userId) {\n      setThemeInsight(null);\n      return;\n    }\n\n    try {\n      const response = await fetch(\n        `${process.env.REACT_APP_BACKEND_URL}/mention-count?user_id=${userId}&theme=${encodeURIComponent(insightTheme)}`\n      );\n      const data = await response.json();\n      if (response.ok) {\n        setThemeInsight(data);\n      } else {\n        console.error('âŒ Error fetching theme insight:', data.error);\n        setThemeInsight(null);\n      }\n    } catch (err) {\n      console.error('âŒ Fetch failed:', err);\n      setThemeInsight(null);\n    }\n  };\n\n  fetchInsight();\n}, [insightTheme, userId]);\n  \nuseEffect(() => {\n  const fetchJournals = async () => {\n    setLoading(true);\n\n    const { data, error } = await supabase\n      .from('journals')\n      .select('*')  // âœ… Include all fields for flexibility\n      .eq('user_id', userId)\n      .order('timestamp', { ascending: false });\n\n    if (error) {\n      console.error('âŒ Error fetching journals:', error.message);\n      setLoading(false);\n      return;\n    }\n\n    setJournalEntries(data || []);\n    console.log('âœ… journalEntries populated:', data); // Add this\n    setLoading(false);\n  };\n\n  fetchJournals();\n}, [userId, refreshTrigger]);\n\n  useEffect(() => {\n    if (bottomRef.current) {\n      // Debounce scroll to prevent competing scroll behaviors on mobile\n      const timeoutId = setTimeout(() => {\n        bottomRef.current.scrollIntoView({ behavior: 'smooth' });\n      }, 100);\n      \n      return () => clearTimeout(timeoutId);\n    }\n  }, [journalEntries]);\n\n // âœ… FILTER THEMES: Step 1: Filter entries by selected theme before grouping\nconst filteredEntries = selectedTheme\n  ? journalEntries.filter(entry =>\n      entry.primary_theme?.toLowerCase() === selectedTheme.toLowerCase() || \n      entry.secondary_theme?.toLowerCase() === selectedTheme.toLowerCase()\n    )\n  : journalEntries;\n\n   // âœ… Then group filtered entries by month\n  const groupedByMonth = groupBy(filteredEntries, entry =>\n    dayjs(entry.timestamp).format('YYYY-MM')\n  );\n\n  //Visual Feedback for Empty Results\n  {filteredEntries.length === 0 && (\n    <p style={{ marginTop:'1rem', fontStyle: 'italic', color: '#666' }}>\n      No journal entries found for this topic. \n        </p>\n    )}\n  \n  const timeline = Object.entries(groupedByMonth).map(([month, monthEntries]) => {\n    const groupedByDay = groupBy(monthEntries, entry =>\n      dayjs(entry.timestamp).format('YYYY-MM-DD')\n    );\n    \n    return {\n      month,\n      days: Object.entries(groupedByDay).map(([day, entries]) => ({\n        day,\n        entries: entries.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp)) // ðŸ“ˆ Old-to-new per day\n      }))\n    };\n  });\n\n  if (loading) {\n    return <div>Loading journal entries...</div>;\n  }\n\n  if (!journalEntries.length) {\n    return <div>No entries found.</div>;\n  }\n\n  const themeSet = new Set();\n  const latestEntryId = journalEntries[journalEntries.length - 1]?.id;\n\njournalEntries.forEach(entry => {\n  if (entry.primary_theme) themeSet.add(entry.primary_theme);\n  if (entry.secondary_theme && entry.secondary_theme !== 'NONE') {\n    themeSet.add(entry.secondary_theme);\n  }\n});\n\nreturn (\n  <div\n    ref={timelineRef}\n    style={{\n      padding: '1rem',\n      paddingBottom: '12rem', // HOW TO INCREASE SPACE BETWEEN TOOLBAR AND TIMELINE\n      overflowY: 'auto',\n      maxHeight: 'calc(100svh - 12rem)', // Adjust depending on header/footer height\n      WebkitOverflowScrolling: 'touch', // Smooth scrolling on iOS\n      scrollBehavior: 'smooth', // Smooth scrolling behavior\n      willChange: 'scroll-position' // Optimize for scroll performance\n    }}\n>\n    {Object.entries(\n      journalEntries.reduce((acc, entry) => {\n        const dateKey = dayjs(entry.timestamp).format('YYYY-MM-DD');\n        if (!acc[dateKey]) acc[dateKey] = [];\n        acc[dateKey].push(entry);\n        return acc;\n      }, {})\n    )\n      .sort((a, b) => new Date(a[0]) - new Date(b[0])) // ðŸªƒ Recent date first\n      .map(([dateKey, entries]) => (\n        <div key={dateKey} style={{ marginBottom: '2rem' }}>\n          <h3 style={{\n            fontSize: '1rem',\n            fontWeight: 'bold',\n            marginBottom: '0.5rem',\n            color: '#444'\n          }}>\n            {dayjs(dateKey).format('MMMM D, YYYY')}\n          </h3>\n          {entries\n            .sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp))\n            .map(entry => (\n              <div key={entry.id || entry.timestamp} style={{ marginBottom: '1rem' }}>\n                {entry.entry_text && (\n                  <ChatBubble\n                    entry={{\n                      entry_text: entry.entry_text,\n                      tone_mode: 'user',\n                      entry_type: 'reflection'\n                    }}\n                    styleVariant={styleVariant}\n                    isMostRecent={entry.id === latestEntryId}\n                  />\n                )}\n          \n                {entry.response_text && (\n                  <ChatBubble\n                    entry={entry}\n                    styleVariant={styleVariant}\n                    isMostRecent={entry.id === latestEntryId}\n                  />\n                )}\n                <div style={{ height: '2.5rem' }} />\n              </div>\n          ))}\n        </div>\n      ))}\n      <div ref={bottomRef} />\n  </div>\n);\n\n}\n\n  \n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,MAAM,QAAQ,OAAO;AACnE,SAASC,QAAQ,QAAQ,mBAAmB;AAC5C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,GAAG,MAAM,uBAAuB;AACvC,OAAOC,QAAQ,MAAM,uBAAuB;AAI5CF,KAAK,CAACG,MAAM,CAACF,GAAG,CAAC;AACjBD,KAAK,CAACG,MAAM,CAACD,QAAQ,CAAC;AAEtB,OAAOE,OAAO,MAAM,gBAAgB;AACpC,OAAOC,MAAM,MAAM,eAAe;AAClC,OAAOC,IAAI,MAAM,aAAa;AAC9B,OAAOC,IAAI,MAAM,QAAQ;AACzB,SAASC,MAAM,QAAQ,UAAU;AACjC,OAAOC,UAAU,MAAM,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,eAAe,SAASC,eAAeA,CAAC;EAACC,MAAM;EAAEC,cAAc;EAAEC;AAAa,CAAC,EAAE;EAAAC,EAAA;EAAA,IAAAC,eAAA;EAC/E,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC;EACxD;EACA,MAAM,CAACwB,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC0B,aAAa,EAAEC,gBAAgB,CAAC,GAAG3B,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtD,MAAM,CAAC4B,YAAY,EAAEC,eAAe,CAAC,GAAG7B,QAAQ,CAAC,KAAK,CAAC;EACvD;EACA,MAAM,CAAC8B,aAAa,EAAEC,gBAAgB,CAAC,GAAG/B,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACgC,eAAe,EAAEC,kBAAkB,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACkC,eAAe,EAAEC,kBAAkB,CAAC,GAAGnC,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1D,MAAMoC,SAAS,GAAGlC,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAMmC,WAAW,GAAGnC,MAAM,CAAC,IAAI,CAAC;;EAIlC;EACA,MAAMoC,eAAe,GAAG,CACtB,+BAA+B,EAC/B,2BAA2B,EAC3B,qBAAqB,EACrB,kBAAkB,EAClB,4BAA4B,EAC5B,kBAAkB,EAClB,uBAAuB,EACvB,oBAAoB,EACpB,qBAAqB,EACrB,cAAc,CACf;EAED,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGxC,QAAQ,CAAC,EAAE,CAAC;EACpDD,SAAS,CAAC,MAAM;IAChByC,eAAe,CAACF,eAAe,CAAC;EAChC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAM,CAACG,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG1C,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAAC2C,YAAY,EAAEC,eAAe,CAAC,GAAG5C,QAAQ,CAAC,EAAE,CAAC;;EAEpD;EACA,MAAM6C,eAAe,GAAGF,YAAY,GAChCrB,cAAc,CAACwB,MAAM,CAACC,KAAK,IAAI;IAC7B,MAAMC,OAAO,GACXD,KAAK,CAACE,aAAa,KAAKN,YAAY,IACpCI,KAAK,CAACG,eAAe,KAAKP,YAAY;IACxC,MAAMQ,WAAW,GACf/C,KAAK,CAAC2C,KAAK,CAACK,SAAS,CAAC,CAACC,MAAM,CAACjD,KAAK,CAAC,CAAC,EAAE,OAAO,CAAC;IACjD,OAAO4C,OAAO,IAAIG,WAAW;EAC/B,CAAC,CAAC,CAACG,MAAM,GACT,CAAC;EAEL,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGxD,QAAQ,CAAC,IAAI,CAAC;EAEtDD,SAAS,CAAC,MAAM;IACd,MAAM0D,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI,CAACd,YAAY,IAAI,CAAC1B,MAAM,EAAE;QAC5BuC,eAAe,CAAC,IAAI,CAAC;QACrB;MACF;MAEA,IAAI;QACF,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAC1B,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,0BAA0B7C,MAAM,UAAU8C,kBAAkB,CAACpB,YAAY,CAAC,EAChH,CAAC;QACD,MAAMqB,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;QAClC,IAAIP,QAAQ,CAACQ,EAAE,EAAE;UACfV,eAAe,CAACQ,IAAI,CAAC;QACvB,CAAC,MAAM;UACLG,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEJ,IAAI,CAACI,KAAK,CAAC;UAC5DZ,eAAe,CAAC,IAAI,CAAC;QACvB;MACF,CAAC,CAAC,OAAOa,GAAG,EAAE;QACZF,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEC,GAAG,CAAC;QACrCb,eAAe,CAAC,IAAI,CAAC;MACvB;IACF,CAAC;IAEDC,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACd,YAAY,EAAE1B,MAAM,CAAC,CAAC;EAE1BlB,SAAS,CAAC,MAAM;IACd,MAAMuE,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC7C,UAAU,CAAC,IAAI,CAAC;MAEhB,MAAM;QAAEuC,IAAI;QAAEI;MAAM,CAAC,GAAG,MAAMjE,QAAQ,CACnCoE,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,GAAG,CAAC,CAAE;MAAA,CACbC,EAAE,CAAC,SAAS,EAAExD,MAAM,CAAC,CACrByD,KAAK,CAAC,WAAW,EAAE;QAAEC,SAAS,EAAE;MAAM,CAAC,CAAC;MAE3C,IAAIP,KAAK,EAAE;QACTD,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAACQ,OAAO,CAAC;QAC1DnD,UAAU,CAAC,KAAK,CAAC;QACjB;MACF;MAEAF,iBAAiB,CAACyC,IAAI,IAAI,EAAE,CAAC;MAC7BG,OAAO,CAACU,GAAG,CAAC,6BAA6B,EAAEb,IAAI,CAAC,CAAC,CAAC;MAClDvC,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC;IAED6C,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,CAACrD,MAAM,EAAEC,cAAc,CAAC,CAAC;EAE1BnB,SAAS,CAAC,MAAM;IACd,IAAIqC,SAAS,CAAC0C,OAAO,EAAE;MACrB;MACA,MAAMC,SAAS,GAAGC,UAAU,CAAC,MAAM;QACjC5C,SAAS,CAAC0C,OAAO,CAACG,cAAc,CAAC;UAAEC,QAAQ,EAAE;QAAS,CAAC,CAAC;MAC1D,CAAC,EAAE,GAAG,CAAC;MAEP,OAAO,MAAMC,YAAY,CAACJ,SAAS,CAAC;IACtC;EACF,CAAC,EAAE,CAACzD,cAAc,CAAC,CAAC;;EAErB;EACD,MAAM8D,eAAe,GAAGtD,aAAa,GACjCR,cAAc,CAACwB,MAAM,CAACC,KAAK;IAAA,IAAAsC,oBAAA,EAAAC,qBAAA;IAAA,OACzB,EAAAD,oBAAA,GAAAtC,KAAK,CAACE,aAAa,cAAAoC,oBAAA,uBAAnBA,oBAAA,CAAqBE,WAAW,CAAC,CAAC,MAAKzD,aAAa,CAACyD,WAAW,CAAC,CAAC,IAClE,EAAAD,qBAAA,GAAAvC,KAAK,CAACG,eAAe,cAAAoC,qBAAA,uBAArBA,qBAAA,CAAuBC,WAAW,CAAC,CAAC,MAAKzD,aAAa,CAACyD,WAAW,CAAC,CAAC;EAAA,CACtE,CAAC,GACDjE,cAAc;;EAEf;EACD,MAAMkE,cAAc,GAAGhF,OAAO,CAAC4E,eAAe,EAAErC,KAAK,IACnD3C,KAAK,CAAC2C,KAAK,CAACK,SAAS,CAAC,CAACqC,MAAM,CAAC,SAAS,CACzC,CAAC;;EAED;EACA;IAACL,eAAe,CAAC9B,MAAM,KAAK,CAAC,iBAC3BvC,OAAA;MAAG2E,KAAK,EAAE;QAAEC,SAAS,EAAC,MAAM;QAAEC,SAAS,EAAE,QAAQ;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAC,QAAA,EAAC;IAEhE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CACN;EAAA;EAEH,MAAMC,QAAQ,GAAGC,MAAM,CAACC,OAAO,CAACb,cAAc,CAAC,CAACc,GAAG,CAAC,CAAC,CAACC,KAAK,EAAEC,YAAY,CAAC,KAAK;IAC7E,MAAMC,YAAY,GAAGjG,OAAO,CAACgG,YAAY,EAAEzD,KAAK,IAC9C3C,KAAK,CAAC2C,KAAK,CAACK,SAAS,CAAC,CAACqC,MAAM,CAAC,YAAY,CAC5C,CAAC;IAED,OAAO;MACLc,KAAK;MACLG,IAAI,EAAEN,MAAM,CAACC,OAAO,CAACI,YAAY,CAAC,CAACH,GAAG,CAAC,CAAC,CAACK,GAAG,EAAEN,OAAO,CAAC,MAAM;QAC1DM,GAAG;QACHN,OAAO,EAAEA,OAAO,CAACO,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACF,CAAC,CAACzD,SAAS,CAAC,GAAG,IAAI2D,IAAI,CAACD,CAAC,CAAC1D,SAAS,CAAC,CAAC,CAAC;MACjF,CAAC,CAAC;IACJ,CAAC;EACH,CAAC,CAAC;EAEF,IAAI5B,OAAO,EAAE;IACX,oBAAOT,OAAA;MAAA+E,QAAA,EAAK;IAA0B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC9C;EAEA,IAAI,CAAC5E,cAAc,CAACgC,MAAM,EAAE;IAC1B,oBAAOvC,OAAA;MAAA+E,QAAA,EAAK;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACrC;EAEA,MAAMc,QAAQ,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC1B,MAAMC,aAAa,IAAA7F,eAAA,GAAGC,cAAc,CAACA,cAAc,CAACgC,MAAM,GAAG,CAAC,CAAC,cAAAjC,eAAA,uBAAzCA,eAAA,CAA2C8F,EAAE;EAErE7F,cAAc,CAAC8F,OAAO,CAACrE,KAAK,IAAI;IAC9B,IAAIA,KAAK,CAACE,aAAa,EAAE+D,QAAQ,CAACK,GAAG,CAACtE,KAAK,CAACE,aAAa,CAAC;IAC1D,IAAIF,KAAK,CAACG,eAAe,IAAIH,KAAK,CAACG,eAAe,KAAK,MAAM,EAAE;MAC7D8D,QAAQ,CAACK,GAAG,CAACtE,KAAK,CAACG,eAAe,CAAC;IACrC;EACF,CAAC,CAAC;EAEF,oBACEnC,OAAA;IACEuG,GAAG,EAAEjF,WAAY;IACjBqD,KAAK,EAAE;MACL6B,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,OAAO;MAAE;MACxBC,SAAS,EAAE,MAAM;MACjBC,SAAS,EAAE,sBAAsB;MAAE;MACnCC,uBAAuB,EAAE,OAAO;MAAE;MAClCC,cAAc,EAAE,QAAQ;MAAE;MAC1BC,UAAU,EAAE,iBAAiB,CAAC;IAChC,CAAE;IAAA/B,QAAA,GAEDM,MAAM,CAACC,OAAO,CACb/E,cAAc,CAACwG,MAAM,CAAC,CAACC,GAAG,EAAEhF,KAAK,KAAK;MACpC,MAAMiF,OAAO,GAAG5H,KAAK,CAAC2C,KAAK,CAACK,SAAS,CAAC,CAACqC,MAAM,CAAC,YAAY,CAAC;MAC3D,IAAI,CAACsC,GAAG,CAACC,OAAO,CAAC,EAAED,GAAG,CAACC,OAAO,CAAC,GAAG,EAAE;MACpCD,GAAG,CAACC,OAAO,CAAC,CAACC,IAAI,CAAClF,KAAK,CAAC;MACxB,OAAOgF,GAAG;IACZ,CAAC,EAAE,CAAC,CAAC,CACP,CAAC,CACEnB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACF,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAIE,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAAA,CAChDR,GAAG,CAAC,CAAC,CAAC0B,OAAO,EAAE3B,OAAO,CAAC,kBACtBtF,OAAA;MAAmB2E,KAAK,EAAE;QAAEwC,YAAY,EAAE;MAAO,CAAE;MAAApC,QAAA,gBACjD/E,OAAA;QAAI2E,KAAK,EAAE;UACTyC,QAAQ,EAAE,MAAM;UAChBC,UAAU,EAAE,MAAM;UAClBF,YAAY,EAAE,QAAQ;UACtBrC,KAAK,EAAE;QACT,CAAE;QAAAC,QAAA,EACC1F,KAAK,CAAC4H,OAAO,CAAC,CAACvC,MAAM,CAAC,cAAc;MAAC;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC,EACJG,OAAO,CACLO,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACF,CAAC,CAACzD,SAAS,CAAC,GAAG,IAAI2D,IAAI,CAACD,CAAC,CAAC1D,SAAS,CAAC,CAAC,CAC7DkD,GAAG,CAACvD,KAAK,iBACRhC,OAAA;QAAuC2E,KAAK,EAAE;UAAEwC,YAAY,EAAE;QAAO,CAAE;QAAApC,QAAA,GACpE/C,KAAK,CAACsF,UAAU,iBACftH,OAAA,CAACF,UAAU;UACTkC,KAAK,EAAE;YACLsF,UAAU,EAAEtF,KAAK,CAACsF,UAAU;YAC5BC,SAAS,EAAE,MAAM;YACjBC,UAAU,EAAE;UACd,CAAE;UACFpH,YAAY,EAAEA,YAAa;UAC3BqH,YAAY,EAAEzF,KAAK,CAACoE,EAAE,KAAKD;QAAc;UAAAnB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CACF,EAEAnD,KAAK,CAAC0F,aAAa,iBAClB1H,OAAA,CAACF,UAAU;UACTkC,KAAK,EAAEA,KAAM;UACb5B,YAAY,EAAEA,YAAa;UAC3BqH,YAAY,EAAEzF,KAAK,CAACoE,EAAE,KAAKD;QAAc;UAAAnB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CACF,eACDnF,OAAA;UAAK2E,KAAK,EAAE;YAAEgD,MAAM,EAAE;UAAS;QAAE;UAAA3C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA,GApB5BnD,KAAK,CAACoE,EAAE,IAAIpE,KAAK,CAACK,SAAS;QAAA2C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAqBhC,CACR,CAAC;IAAA,GAlCM8B,OAAO;MAAAjC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAmCZ,CACN,CAAC,eACFnF,OAAA;MAAKuG,GAAG,EAAElF;IAAU;MAAA2D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtB,CAAC;AAGR;AAAC9E,EAAA,CAtOuBJ,eAAe;AAAA2H,EAAA,GAAf3H,eAAe;AAAA,IAAA2H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}